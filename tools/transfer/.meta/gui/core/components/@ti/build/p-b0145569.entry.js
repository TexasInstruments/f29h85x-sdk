import{r as i,c as t,h as e,H as o,g as s}from"./p-ce1dc307.js";const n=':host{display:block}:host .ti-view-more{width:var(--ti-view-more-width, 100%)}:host .ti-view-more .ti-view-more-content{overflow:hidden;transition:height 150ms cubic-bezier(0.4, 0, 0.2, 1)}:host .ti-view-more .ti-view-more-content .ti-view-more-slot-wrapper{box-sizing:border-box;margin:-1px 0;padding:1px 0}:host .ti-view-more .ti-view-more-action{display:flex;justify-content:space-between;width:100%;transition:margin-top 150ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}:host .ti-view-more .ti-view-more-action.ti-view-more-fade{margin-top:0.5rem}:host .ti-view-more .ti-view-more-action.ti-view-more-fade:before{content:" ";height:32px;width:100%;background:linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, white 88%, white 100%);position:absolute;display:block;bottom:19px;pointer-events:none;transition:height 150ms cubic-bezier(0.4, 0, 0.2, 1)}:host .ti-view-more .ti-view-more-action .ti-view-more-action-label,:host .ti-view-more .ti-view-more-action .ti-view-more-action-link{background:#ffffff;color:#007c8c;z-index:1}:host .ti-view-more .ti-view-more-action .ti-view-more-action-label{flex:1 0 auto;cursor:pointer}:host .ti-view-more .ti-view-more-action .ti-view-more-action-label ti-svg-icon{fill:#007c8c;margin:0 8px;transition:transform 0.15s cubic-bezier(0.4, 0, 0.2, 1)}:host .ti-view-more .ti-view-more-action .ti-view-more-action-link{flex:0 0 auto}:host .ti-view-more .ti-view-more-hide{display:none}:host(.ti-view-more-button) .ti-view-more>.ti-view-more-action:before{bottom:41px}:host(.ti-view-more-button) .ti-view-more>.ti-view-more-action .ti-view-more-action-label{width:100%;text-align:center;padding:10px 0;background:#f7f7f7;color:#007c8c;font-size:14px;border:1px solid #cccccc;border-radius:0;display:block;cursor:pointer}:host(.ti-view-more-expanded) .ti-view-more .ti-view-more-content+.ti-view-more-action:before{background:transparent}:host(.ti-view-more-expanded) .ti-view-more .ti-view-more-action.ti-view-more-fade{margin-top:16px}:host(.ti-view-more-expanded) .ti-view-more .ti-view-more-action.ti-view-more-fade:before{height:0}:host(.ti-view-more-expanded) .ti-view-more .ti-view-more-action .ti-view-more-action-label>ti-svg-icon{transform:rotate(180deg)}';let r=class{constructor(e){i(this,e);this.tiChange=t(this,"tiChange",7);this.tiMetricsAction=t(this,"tiMetricsAction",7);this._hasLinkSlot=false;this.hideAction=false;this.collapsedHeight=260;this.isExpanded=false;this.locale="en-US";this.useButton=false}componentWillLoad(){this.expandActionLabel=this._ensureLabel(this.expandActionLabel,"expandActionLabel");this.collapseActionLabel=this._ensureLabel(this.collapseActionLabel,"collapseActionLabel");this._hasLinkSlot=this.hostElement.querySelector('[slot="link"]')!=null}componentDidLoad(){setTimeout((()=>{this._setContentHeight();this._addIntersectionObserver()}),200)}disconnectedCallback(){if(this._io){this._io.disconnect();this._io=null}}onResizeWindow(){if(this._slotWrapperEl&&this._slotWrapperEl.offsetParent){const i=this._slotWrapperEl.getBoundingClientRect().height;if(i>0&&i!==this._contentHeight){this._contentHeight=i;this._updateHideAction();if(this.isExpanded){this._updateVisibleHeight()}}}}onTiChange(){this.tiMetricsAction.emit({elementName:this.hostElement.tagName,eventName:"link click",data:{value:this.isExpanded?"view all":"view less"}})}async collapse(){this.isExpanded=false}async expand(){this.isExpanded=true}async toggle(){this.isExpanded=!this.isExpanded}_addIntersectionObserver(){if("IntersectionObserver"in window){this._io=new IntersectionObserver((i=>{if(i[0].isIntersecting){this._setContentHeight()}}));if(this._io["USE_MUTATION_OBSERVER"]!=null){this._io["USE_MUTATION_OBSERVER"]=false}this._io.observe(this.hostElement)}}_ensureLabel(i,t){return i||(r.LANGUAGE_STRINGS[this.locale]?r.LANGUAGE_STRINGS[this.locale][t]:r.LANGUAGE_STRINGS["en-US"][t])}_setContentHeight(){const i=this._slotWrapperEl.getBoundingClientRect().height;if(i>0&&i!==this._contentHeight){this._contentHeight=i;this._updateHideAction();this._updateVisibleHeight()}}_toggleClick(){this.toggle();this._updateWindowPosition();this._updateVisibleHeight();this.tiChange.emit({isExpanded:this.isExpanded})}_updateHideAction(){const i=this._contentHeight>0&&this._contentHeight<this.collapsedHeight+104;if(i){this.isExpanded=true}else if(this.hideAction){this.isExpanded=false}this.hideAction=i}_updateVisibleHeight(){if(this.isExpanded){if(this._contentHeight===0){this._contentHeight=this._slotWrapperEl.getBoundingClientRect().height}if(this._contentHeight>0){this._updateHideAction();this._contentEl.style.height=this._contentHeight+"px"}else{this.isExpanded=false}}else{this._contentEl.style.height=this.collapsedHeight+"px"}}_updateWindowPosition(){if(!this.isExpanded){const i=this._contentHeight-this.collapsedHeight;if(this._buttonEl.getBoundingClientRect().top<i){const i=window.pageYOffset+this.hostElement.getBoundingClientRect().top;window.scrollTo(window.scrollX,i)}}}render(){return e(o,{class:{"ti-view-more-button":this.useButton,"ti-view-more-expanded":this.isExpanded}},e("div",{class:"ti-view-more"},e("div",{ref:i=>this._contentEl=i,class:"ti-view-more-content"},e("div",{class:"ti-view-more-slot-wrapper",ref:i=>this._slotWrapperEl=i},e("slot",null))),e("div",{class:this.hideAction&&(this.useButton||!this._hasLinkSlot)?"ti-view-more-hide":this.collapsedHeight>0?"ti-view-more-action ti-view-more-fade":"ti-view-more-action"},!this.hideAction&&e("span",{class:"ti-view-more-action-label",ref:i=>this._buttonEl=i,onClick:()=>this._toggleClick()},this.isExpanded?this.collapseActionLabel:this.expandActionLabel,e("ti-svg-icon",{size:"s",appearance:"secondary"},"chevron-down")),this.hideAction&&this._hasLinkSlot&&e("span",{class:"ti-view-more-action-label",style:{cursor:"default"}}," "),e("span",{class:this.useButton?"ti-view-more-hide":"ti-view-more-action-link"},e("slot",{name:"link"})))))}get hostElement(){return s(this)}};r.LANGUAGE_STRINGS={"en-US":{expandActionLabel:"View more",collapseActionLabel:"View less"},"zh-CN":{expandActionLabel:"显示更多",collapseActionLabel:"部分显示"},"ja-JP":{expandActionLabel:"詳細を表示",collapseActionLabel:"詳細を非表示"}};r.style=n;export{r as ti_view_more};
//# sourceMappingURL=p-b0145569.entry.js.map