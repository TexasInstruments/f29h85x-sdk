import{r as s,c as t,h as i,H as a,g as o}from"./p-ce1dc307.js";const e=":host{display:inline-block;box-sizing:border-box}:host,:host :before,:host :after,:host *{box-sizing:inherit}:host ti-password{width:100%}:host ti-password[disabled]{background-color:#e8e8e8;cursor:not-allowed}:host ti-password[readonly]{cursor:not-allowed}:host .ti-password-validator-requirements-label{margin-top:0.5em}:host .ti-password-validator-hints{transition:height 0.3s ease-out;overflow:hidden;height:0px}:host .ti-password-validator-strength-meter{margin-top:10px;margin-bottom:8px;background-color:#e8e8e8}:host .ti-password-validator-strength-fill{height:4px;transition:width 150ms cubic-bezier(0.4, 0, 0.2, 1), color 150ms linear}:host .ti-password-validator-strength-0{width:0%}:host .ti-password-validator-strength-1{width:25%;background-color:#cc0000}:host .ti-password-validator-strength-2{width:50%;background-color:#ff9933}:host .ti-password-validator-strength-3{width:75%;background-color:#fbe458}:host .ti-password-validator-strength-4{width:100%;background-color:#44bb55}:host li{list-style-type:none;margin:3px 0}:host ul{padding-left:0;margin:4px 0}:host .ti-password-validator-blank{padding-left:25px;padding-top:5px}:host span.ti-password-validator-checkmark{display:none;width:18px;margin-top:1px;margin-right:0.5rem}:host span.ti-password-validator-checkmark svg{width:18px;height:18px;fill:#4b5}:host span.ti-password-validator-close{display:inline-block;width:18px;margin-top:1px;margin-right:0.5rem}:host span.ti-password-validator-close svg{width:18px;height:18px;fill:#c00}:host span.ti-password-validator-dash{display:inline-block;width:0.6rem;margin-top:0.5rem;margin-left:0.3rem;position:relative;border-top:2px solid #555}:host li.ti-password-validator-satisfied span.ti-password-validator-checkmark{display:inline-block;fill:#44bb55}:host li.ti-password-validator-satisfied span.ti-password-validator-close{display:none}";let r=class{constructor(i){s(this,i);this.componentLoaded=t(this,"componentLoaded",7);this.tiChange=t(this,"tiChange",7);this.tiValidationChange=t(this,"tiValidationChange",7);this.capsWarning="Caps lock is ON";this.collapsedAtStart=false;this.disabled=false;this.isValid=false;this.name="";this.placeholder="";this.readonly=false;this.strengthLevels="Weak,Weak,Weak,Moderate,Strong";this.strengthPrompt="Strength:";this.useInForm=false;this.value=""}validChanged(s,t){if(s!==t){this.tiValidationChange.emit({isValid:s})}}valueChanged(s,t){this._checkPassword(s);if(this._hasSlottedInput){this.hostElement.querySelector("input").value=s}else{if(this.useInForm&&document.head.attachShadow){this._hiddenInput.value=s}if(this.useInForm&&!document.head.attachShadow&&this._passwordInput){this._passwordInput.value=s}}this.tiChange.emit({value:s})}focus(){this._passwordInput.focus()}componentDidLoad(){const s=this.hostElement.shadowRoot;this._passwordInput=s.querySelector("ti-password");this._passwordInput.setAttribute("maxlength","128");this._passwordInput.setAttribute("autocomplete","new-password");this._strengthLevels=this.strengthLevels.split(",",5);if(typeof window["zxcvbn"]!=="function"){this._strengthDiv.setAttribute("style","display:none");console.log("zxcvbn not present; password validator will not check strength")}this._checkPassword(this.value);if(this.collapsedAtStart){this._passwordInput.addEventListener("focusin",(s=>{this._expandHintsDivSection()}))}else{this._expandHintsDivSection()}if(!this._hasSlottedInput&&this.useInForm&&document.head.attachShadow){this._hiddenInput=document.createElement("input");this._hiddenInput.name=this.hostElement.getAttribute("name");this._hiddenInput.type="hidden";this._hiddenInput.value=this.value;this.hostElement.appendChild(this._hiddenInput)}this.componentLoaded.emit()}componentWillLoad(){this._hasSlottedInput=this.hostElement.querySelector("input")!==null;if(this._hasSlottedInput){this.hostElement.querySelector("input").value=this.value}}collapseHints(){return new Promise(((s,t)=>{this._hintsDiv.style.height="0px";setTimeout((()=>{s()}),300)}))}_checkPassword(s){let t=true;if(r._RULE_ELEMENTS[0]!==null&&r._RULE_ELEMENTS[0]!==undefined){for(let i=0;i<r._PASSWORD_RULES.length;i++){if(r._PASSWORD_RULES[i](s)){r._RULE_ELEMENTS[i].classList.add("ti-password-validator-satisfied")}else{t=false;r._RULE_ELEMENTS[i].classList.remove("ti-password-validator-satisfied")}}}if(typeof window["zxcvbn"]==="function"){let i=0;if(t){i=window["zxcvbn"](s).score}const a=[0,1,2,3,4,5].map((s=>"ti-password-validator-strength-"+s));this._strengthMeterDiv.classList.remove(...a);this._strengthMeterDiv.classList.add("ti-password-validator-strength-"+i);let o=this._strengthLevels[i];if(s==""){o="<span class='ti-password-validator-dash'></span>"}this._strengthTextDiv.innerHTML="<b>"+this.strengthPrompt+"</b>&nbsp;"+o}this.isValid=t}_expandHintsDivSection(){this._hintsDiv.style.height=this._hintsDiv.scrollHeight+"px"}_onPasswordInput(s){const t=s.target;if(t){this.value=t.value||""}}render(){const s=[];for(let t=0;t<r._RULE_ELEMENTS.length;t++){s.push(i("li",{ref:s=>r._RULE_ELEMENTS[t]=s},i("span",{class:"ti-password-validator-checkmark"},i("svg",{viewBox:"-30 -30 200 200",focusable:"false",xmlns:"http://www.w3.org/2000/svg"},i("path",{d:"M154.049 67.093l-75.956 75.956-.093-.093-.093.093-41.956-41.956 14.142-14.142L78 114.858l61.907-61.907 14.142 14.142z"}))),i("span",{class:"ti-password-validator-close"},i("svg",{viewBox:"-90 -120 300 300",focusable:"false",xmlns:"http://www.w3.org/2000/svg"},i("path",{d:"M165 40.899L151.101 27 96 82.101 40.899 27 27 40.899 82.101 96 27 151.101 40.899 165 96 109.899 151.101 165 165 151.101 109.899 96z"}))),i("slot",{name:r._RULE_SLOT_NAMES[t]})))}return i(a,{class:"ti-password-validator"},i("ti-password",{capsWarning:this.capsWarning,disabled:this.disabled,name:this.name,onInput:s=>this._onPasswordInput(s),placeholder:this.placeholder,readonly:this.readonly,ref:s=>this._passwordInput=s,useInForm:this.useInForm,value:this.value},i("slot",{name:"input"})),i("div",{class:"ti-password-validator-hints",ref:s=>this._hintsDiv=s},i("div",{class:"ti-password-validator-strength-meter",ref:s=>this._strengthDiv=s},i("div",{class:"ti-password-validator-strength-fill ti-password-validator-strength-0",ref:s=>this._strengthMeterDiv=s})),i("div",{ref:s=>this._strengthTextDiv=s}),i("div",{class:"ti-password-validator-requirements-label"},i("slot",{name:"password_requirements"})),i("ul",null,s,i("li",{class:"ti-password-validator-blank"},i("slot",{name:"opt_special_chars"})))))}get hostElement(){return o(this)}static get watchers(){return{isValid:["validChanged"],value:["valueChanged"]}}};r._RULE_ELEMENTS=new Array(4);r._RULE_SLOT_NAMES=["req_length","req_lowercase","req_uppercase","req_number"];r._PASSWORD_RULES=[s=>s.length>=8,s=>/[a-z]/.test(s),s=>/[A-Z]/.test(s),s=>/[0-9]/.test(s)];r.style=e;export{r as ti_password_validator};
//# sourceMappingURL=p-5caf0ec6.entry.js.map