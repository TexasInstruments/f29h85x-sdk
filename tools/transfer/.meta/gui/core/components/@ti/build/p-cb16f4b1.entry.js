import{r as t,c as i,h as e,H as s,g as l}from"./p-ce1dc307.js";const h=':host{display:block;position:relative;min-width:120px}:host .ti-multi-select-input{visibility:hidden;position:absolute;top:0;left:0}:host .ti-multi-select-box{position:relative;z-index:1;cursor:pointer;border:1px solid #cccccc;height:30px;line-height:30px;padding:0 0.5rem;padding-right:calc(0.5rem + 24px);background-image:url("https://www.ti.com/assets/icons/ti_icons-objects/chevron-down.svg");background-position:right 6px top 7px;background-size:18px;background-repeat:no-repeat;background-color:#ffffff;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:#555555}:host .ti-multi-select-box.has-placeholder{font-style:italic}:host .ti-multi-select-clear{position:absolute;display:flex;align-items:center;justify-content:center;top:0;right:0;z-index:2;height:30px;line-height:30px;width:30px;background-color:#ffffff;border:1px solid #cccccc;border-left-width:0;cursor:pointer}:host .ti-multi-select-clear:hover{background-color:#e8e8e8}:host .ti-multi-select-panel{width:max-content;min-width:100%;max-height:289px;overflow-x:hidden;position:absolute;left:0;z-index:300;padding:0;background-color:#ffffff;box-shadow:0 0 1px 1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.16), 0 4px 5px 0 rgba(0, 0, 0, 0.1), 0 1px 10px 0 rgba(0, 0, 0, 0.08);transition:height 0.225s cubic-bezier(0.4, 0, 0.2, 1)}:host .ti-multi-select-panel.ti-multi-select-panel-direction-up{bottom:30px}:host .ti-multi-select-panel.ti-multi-select-panel-direction-left{left:initial;right:0}:host .ti-multi-select-panel-row{display:flex;flex-direction:row}:host .ti-multi-select-panel-column{flex:1 0 auto}:host .ti-multi-select-option-list{list-style:none;margin:0;padding:0;user-select:none}:host .ti-multi-select-option{position:relative;margin-bottom:0;padding:0;line-height:18px;white-space:nowrap;color:#555555}:host .ti-multi-select-option:hover{cursor:pointer;background-color:#e8e8e8}:host .ti-multi-select-option.select-all{border-bottom:1px dotted #cccccc;padding-bottom:calc(0.5rem - 1px)}:host .ti-multi-select-option.is-disabled span{opacity:0.5}:host .ti-multi-select-option.is-disabled:hover{cursor:default;background-color:inherit}:host .ti-multi-select-option-filter{padding:0.5rem}:host .ti-multi-select-select-all-link{color:#007c8c;text-decoration:none;outline:0;margin:8px}:host .ti-multi-select-select-all-link:hover{text-decoration:underline}:host ti-checkbox{width:calc(100% - 2rem);padding:0.5rem;padding-right:1.5rem}@media all and (-ms-high-contrast: none), (-ms-high-contrast: active){:host ti-checkbox{width:100%;padding-right:1rem}}:host([disabled]) .ti-multi-select-box,:host([disabled]) .ti-multi-select-clear{background-color:#e8e8e8;cursor:not-allowed}';let o=class{constructor(e){t(this,e);this.tiMultiSelectChange=i(this,"tiMultiSelectChange",7);this._checkboxes=[];this._panelMaxHeight=289;this._parentScrollbarListener={handleEvent:()=>{if(this.isExpanded){this.isExpanded=false;this._updateDropdownPanel();this._scrollParent.removeEventListener("scroll",this._parentScrollbarListener)}}};this._windowScrollListener={handleEvent:()=>{if(this.isExpanded){this.isExpanded=false;this._updateDropdownPanel();window.removeEventListener("scroll",this._windowScrollListener)}}};this.items={};this.isExpanded=false;this.isSelected=false;this.disabled=false;this.enabledOptions="";this.locale="en-US";this.optionDelimiter=",";this.options="";this.panelPosition="auto";this.showSelectAll=false}disabledHandler(t){if(t){this.isExpanded=false;this._updateDropdownPanel()}}enabledOptionsHandler(t){const i=t.split(this.optionDelimiter);for(const t in this.items){if(this.items[t]){this.items[t].disabled=i.indexOf(this.items[t].value)===-1;if(this.items[t].disabled){this.items[t].selected=false}}}this._setSelectedNumber()}componentWillLoad(){if(this.options&&Object.keys(this.items).length===0){const t=this.options.split(this.optionDelimiter);const i=this.defaultSelectedOptions?this.defaultSelectedOptions.split(this.optionDelimiter):[];t.forEach((t=>{this.items[t]={label:t,value:t,disabled:false,selected:i.indexOf(t)>-1}}))}this.allSelectedLabel=this._ensureLabel(this.allSelectedLabel,"allSelectedLabel");this.clearLabel=this._ensureLabel(this.clearLabel,"clearLabel");this.placeholder=this._defaultPlaceholder=this._ensureLabel(this.placeholder,"defaultLabel");this.selectAllLabel=this._ensureLabel(this.selectAllLabel,"selectAllLabel");this.selectedLabel=this._ensureLabel(this.selectedLabel,"selectedLabel")}componentDidLoad(){const t=this.hostElement.shadowRoot.querySelectorAll("ti-checkbox");t.forEach((t=>this._checkboxes.push(t)));this.isSelected=this.showSelectAll&&this._checkboxes.find((t=>this.items[t.value].selected===false))===undefined;this._setSelectedNumber();this._panelHeight=this._panelElement.scrollHeight;this._updateDropdownPanel()}async clearAll(){this._checkboxes.forEach((t=>{this.items[t.value].selected=false}));this._setSelectedNumber()}async setEnabledOptions(t){if(t!==undefined){this.enabledOptions=t}}onTiMultiSelectChange(t){const i=t.detail.originator;if(i.options!=this.options||i!==this){return}const e=t.detail.value.split(this.optionDelimiter);if(e.length===0){this._checkboxes.forEach((t=>{this.items[t.value].selected=false}));this._setSelectedNumber();return}this._checkboxes.forEach((t=>{this.items[t.value].selected=e.indexOf(t.value)>-1}));this._setSelectedNumber()}onClick(t){const i=t.composedPath();let e=true;for(let t=0;t<i.length;t++){const s=i[t];if(s.tagName==="TI-MULTI-SELECT"){if(s.parentElement.getAttribute("filter-column")===this.hostElement.parentElement.getAttribute("filter-column")){e=false}break}}if(e){this.isExpanded=false;this._updateDropdownPanel()}}_clearOptionsHandler(t){this.isSelected=false;this._checkboxes.forEach((t=>{this.items[t.value].selected=false}));this._setSelectedNumber();const i=Object.assign(Object.assign({},t.detail),{value:"",originator:this});this.tiMultiSelectChange.emit(i)}_ensureLabel(t,i){return t||(o.LANGUAGE_STRINGS[this.locale]?o.LANGUAGE_STRINGS[this.locale][i]:o.LANGUAGE_STRINGS["en-US"][i])}_getSelectedOptions(){const t=[];for(const i in this.items){if(this.items[i]&&this.items[i].selected){t.push(i)}}return t}_selectAllOptions(t){this._checkboxes.forEach((t=>{t.checked=true}));this._selectOptionHandler(t)}_selectOptionHandler(t){this._checkboxes.forEach((t=>{this.items[t.value].selected=t.checked}));this.isSelected=this.showSelectAll&&this._checkboxes.find((t=>this.items[t.value].selected===false))===undefined;const i=this._getSelectedOptions();this._setSelectedNumber();const e=Object.assign(Object.assign({},t.detail),{value:i.join(this.optionDelimiter),originator:this});this.tiMultiSelectChange.emit(e)}_setSelectedNumber(){const t=this._getSelectedOptions();if(this.showSelectAll&&(t.length>0&&t.length===this._checkboxes.length)){this.placeholder=this.allSelectedLabel}else if(t.length>0){this.placeholder=this.selectedLabel.replace("{}",t.length.toString())}else{this.placeholder=this._defaultPlaceholder}this.showClearButton=t.length>0?true:false}_toggleDropdown(){if(this.disabled){return}this.isExpanded=!this.isExpanded;this._updateDropdownPanel()}_updateDropdownPanel(){if(this._panelElement){if(this.isExpanded){const t=window.innerHeight;this._panelElement.style.height=(this._panelHeight||this._panelElement.scrollHeight)+"px";this._panelHeight=this._panelElement.scrollHeight;if(this._panelHeight<=this._panelMaxHeight&&this._panelHeight<t){this._panelElement.style.overflowY="hidden"}else if(this._panelHeight>this._panelMaxHeight){this._panelElement.style.overflowY="scroll"}if(!this._scrollParent){const t=this.hostElement.closest(`table`);if(t&&t.parentElement){this._scrollParent=t.parentElement}}this._panelElement.style.maxWidth=this._panelElement.scrollWidth+"px";this._panelElement.style.minWidth=this._panelElement.scrollWidth+"px";this._panelElement.style.position="fixed";this._panelElement.style.left=this.hostElement.offsetLeft-(this._scrollParent?this._scrollParent.scrollLeft:0)+"px";const i=this._selectBoxElement.getBoundingClientRect();let e=i.top+i.height;if(this._scrollParent&&this._scrollParent.classList.contains("ti-table-controller-scroll-container")){const i=this._scrollParent.getBoundingClientRect();const s=Math.min(t,i.bottom);if(e+this._panelHeight>s){e=s-this._panelHeight-20}this._scrollParent.addEventListener("scroll",this._parentScrollbarListener)}if(t-10<parseInt(this._panelElement.style.height)){this._panelElement.style.overflowY="scroll";if(this.panelPosition==="auto"){e=0;this._panelElement.style.maxHeight=t-30+"px"}}this._panelElement.style.top=e+"px";window.addEventListener("scroll",this._windowScrollListener)}else{this._panelElement.style.height=0+"px"}}}render(){return e(s,null,e("div",{class:"ti-multi-select-box",ref:t=>this._selectBoxElement=t,onClick:()=>this._toggleDropdown()},e("span",{class:"ti-multi-select-selected"},this.placeholder)),this.showClearButton&&e("span",{class:"ti-multi-select-clear",onClick:t=>this._clearOptionsHandler(t)},e("ti-svg-icon",{size:"s","icon-set":"actions"},"close")),e("div",{class:"ti-multi-select-panel",ref:t=>this._panelElement=t},e("div",{class:"ti-multi-select-panel-content"},e("div",{class:"ti-multi-select-panel-row"},e("div",{class:"ti-multi-select-panel-column"},e("ul",{class:"ti-multi-select-option-list"},this.showSelectAll&&e("li",{class:"ti-multi-select-select-all-link",onClick:t=>this.isSelected?this._clearOptionsHandler(t):this._selectAllOptions(t)},this.isSelected?this.clearLabel:this.selectAllLabel),Object.keys(this.items).length>0&&Object.keys(this.items).map((t=>e("li",{class:"ti-multi-select-option"},e("ti-checkbox",{value:this.items[t].value,onClick:t=>this._selectOptionHandler(t),disabled:this.items[t].disabled,checked:this.items[t].selected},this.items[t].label))))))))))}get hostElement(){return l(this)}static get watchers(){return{disabled:["disabledHandler"],enabledOptions:["enabledOptionsHandler"]}}};o.LANGUAGE_STRINGS={"en-US":{allSelectedLabel:"All selected",clearLabel:"Clear",defaultLabel:"Select",selectAllLabel:"Select all",selectedLabel:"{} selected"},"zh-CN":{allSelectedLabel:"全选",clearLabel:"清除",defaultLabel:"选择",selectAllLabel:"全选",selectedLabel:"已选择 {} 项"},"ja-JP":{allSelectedLabel:"選択されているものすべて",clearLabel:"クリア",defaultLabel:"選択",selectAllLabel:"すべて選択",selectedLabel:"{} つを選択済み"}};o.style=h;export{o as ti_multi_select};
//# sourceMappingURL=p-cb16f4b1.entry.js.map