import{r as t,c as i,h as e,H as a,g as s}from"./p-ce1dc307.js";const n=':host{display:block}:host nav{display:block;background:#f7f7f7;border-top:1px solid #e8e8e8;border-bottom:1px solid #e8e8e8}:host .ti-chapter-nav-fixed-nav{height:64px}:host a{text-decoration:none;color:#333333;outline:0;max-width:250px;padding:24px 0;white-space:nowrap;text-overflow:ellipsis;line-height:1em;cursor:pointer;font-size:16px}:host a:hover{text-decoration:underline}:host ul{display:-webkit-box;display:-ms-flexbox;display:flex;margin:0;padding-left:3.5rem}:host ul.ti-chapter-nav-center{max-width:1240px;margin:auto !important}:host ul li{display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:row;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;padding:0;background:0}:host ul li.ti-chapter-nav-active a{color:#cc0000 !important}:host ul li:not(:last-child)::after{position:relative !important;display:inline-block !important;margin:0 16px !important;content:"|" !important;color:#cccccc !important}:host .ti-chapter-nav-sticky-container{opacity:0;pointer-events:none;position:fixed;z-index:200;top:0;left:0;height:auto;width:100%;box-shadow:0 0 1px 1px rgba(0, 0, 0, 0.05), 0 7px 9px -4px rgba(0, 0, 0, 0.16), 0 14px 21px 2px rgba(0, 0, 0, 0.1), 0 5px 26px 4px rgba(0, 0, 0, 0.08)}:host .ti-chapter-nav-sticky{animation:navDown 150ms cubic-bezier(0, 0, 0.2, 1), navIn 200ms;animation-fill-mode:forwards}:host .ti-chapter-nav-sticky.ti-chapter-nav-sticky-container{pointer-events:initial}:host .ti-chapter-nav-sticky.ti-chapter-nav-compact a{padding:16px 0}.ti-chapter-nav-animate-out{animation:navUp 100ms cubic-bezier(0.4, 0, 1, 1), navOut 200ms;animation-fill-mode:forwards}@keyframes navDown{0%{-webkit-transform:translateY(-15px);transform:translateY(-15px)}100%{-webkit-transform:translateY(0px);transform:translateY(0px)}}@keyframes navUp{0%{-webkit-transform:translateY(0);transform:translateY(0)}100%{-webkit-transform:translateY(-24px);transform:translateY(-24px)}}@keyframes navIn{0%{display:none;opacity:0}1%{display:block;opacity:0}100%{display:block;opacity:1}}@keyframes navOut{0%{display:block;opacity:1}99%{display:block;opacity:0}100%{display:none;opacity:0}}';let o=class{constructor(e){t(this,e);this.tiMetricsAction=i(this,"tiMetricsAction",7);this._chapterNavItems=new Set;this._tabDelimiter="##";this._isAutoScrolling=false;this._scrollToPosition=0}componentWillLoad(){this._chapterNav=this.hostElement.closest("ti-chapter-nav");this._hasStickyContentSlotted=!!this.hostElement.querySelector('[slot="sticky-content"]');this._hasTopAnchorSlotted=!!this.hostElement.querySelector('[slot="top-anchor"]')}componentDidLoad(){setTimeout((()=>{this._setAnchorTops()}),50)}onHashchange(){setTimeout((()=>{this._navigateToHash(window.location.hash)}),50)}onLoad(){setTimeout((()=>{this.isSticky=!this._isElementInBounds(this._chapterNav,0,null);this._setAnchorTops()}),50)}onScroll(){if(this._chapterNav){const t=this.isSticky?this._highlightedChapterElement:undefined;this._setSticky(!this._isElementInBounds(this._chapterNav,0,null));this._updateChapterNavItemStatus();const i=window.pageYOffset-this._scrollToPosition;if(this._isAutoScrolling&&(i<=1&&i>=-1)){this._isAutoScrolling=false}else if(!this._isAutoScrolling&&this.isSticky&&this._highlightedChapterElement!==undefined&&this._highlightedChapterElement!==t&&this._activeAnchor){this.tiMetricsAction.emit({elementName:this.hostElement.tagName,eventName:"scroll",data:{context:(this.isSticky?"sticky_nav":"fixed_nav")+" "+this._activeAnchor.getAttribute("anchor-name")}})}}}onTiChapterNavControl(t){this._navigateToHash(t.detail.hash)}_findHashAnchor(t){if(!t||t.length<2){return null}return this.chapterNavAnchors.find((i=>i.id===t.substring(1)))}_isElementInBounds(t,i,e){const a=t.getBoundingClientRect();if((i===null||a.top>=i)&&(e===null||a.bottom<=e&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight))){return true}else{return false}}_navigateToAnchor(t,i=true){const e="scrollBehavior"in document.documentElement.style;this._isAutoScrolling=true;this._scrollToPosition=t.getBoundingClientRect().top+pageYOffset;if(e){window.scrollTo({top:this._scrollToPosition,behavior:"smooth"})}else{window.scrollTo(0,this._scrollToPosition)}if(i){history.pushState(null,null,`#${t.id}`)}}_navigateToHash(t,i=true){const e=this._findHashAnchor(t);if(e){this._navigateToAnchor(e,i)}}_navigateToTop(){this._scrollToPosition=0;this._isAutoScrolling=true;window.scrollTo({top:0,behavior:"smooth"});history.pushState(null,null,`#top`)}_renderChapterNavListItems(t){if(this.chapterNavAnchors){return this.chapterNavAnchors.map((i=>(i.isChapterNavEligible===undefined||i.isChapterNavEligible)&&e("li",{id:i.id+"-nav-item",ref:i=>t?this._chapterNavItems.add(i):""},e("a",{onClick:t=>{this._navigateToAnchor(i);t.preventDefault()},id:(t?"sticky-nav-":"fixed-nav-")+i.id,href:"#"+i.id},i.anchorName))))}}_setAnchorTops(){if(!this.chapterNavAnchors&&document.readyState==="complete"&&this._chapterNavSticky){const t=this._chapterNavSticky.getBoundingClientRect().height+8;this.chapterNavAnchors=Array.from(document.getElementsByTagName("ti-chapter-nav-anchor"),(i=>{i.style.top=i.style.top||-1*t+"px";return i}));let i=window.location.hash;const e=i.indexOf(this._tabDelimiter);if(e>-1){i=i.substr(0,e)}this._navigateToHash(i,false)}}_setSticky(t){if(!this._chapterNavSticky)return;if(this.isSticky===t){return}if(t){this.isSticky=true;this._chapterNavSticky.classList.remove("ti-chapter-nav-animate-out")}else{this._chapterNavSticky.classList.add("ti-chapter-nav-animate-out");setTimeout((()=>{this.isSticky=t}),200)}}_updateChapterNavItemStatus(){let t;if(window.innerHeight+window.scrollY>=document.body.offsetHeight){this._updateHighlightedChapterElement(Array.from(this._chapterNavItems).pop())}else{if(this.chapterNavAnchors){this.chapterNavAnchors.forEach((i=>{const e=this._isElementInBounds(i,null,225);if(e){t=i}}))}if(!t){this._activeAnchor=undefined;this._updateHighlightedChapterElement(undefined)}else{this._chapterNavItems.forEach((i=>{if(i.id==t.id+"-nav-item"){if(this._highlightedChapterElement!=i){this._activeAnchor=t;this._updateHighlightedChapterElement(i)}}}))}}}_updateHighlightedChapterElement(t){this._highlightedChapterElement=t;this._chapterNavItems.forEach((t=>{if(t==this._highlightedChapterElement){t.classList.add("ti-chapter-nav-active")}else{t.classList.remove("ti-chapter-nav-active")}}))}render(){return e(a,{"data-lid":this.isSticky?"sticky_nav":"fixed_nav"},e("nav",{class:"ti-chapter-nav-fixed-nav"},e("ul",{class:{"ti-chapter-nav-center":this.center}},this._renderChapterNavListItems(false))),e("div",{ref:t=>this._chapterNavSticky=t,class:{"ti-chapter-nav-sticky":this.isSticky,"ti-chapter-nav-sticky-container":true,"ti-chapter-nav-compact":this._hasStickyContentSlotted}},e("slot",{name:"sticky-content"}),e("nav",null,e("ul",{class:{"ti-chapter-nav-center":this.center}},this._hasTopAnchorSlotted&&e("li",{class:"ti-chapter-nav-top-anchorlink"},e("a",{onClick:t=>{this._navigateToTop();t.preventDefault()},id:"sticky-nav-top","data-navtitle":"top",href:"#top",style:!this.chapterNavAnchors&&{opacity:"0",pointerEvents:"none"}},e("slot",{name:"top-anchor"}))),this._renderChapterNavListItems(true)))))}get hostElement(){return s(this)}};o.style=n;export{o as ti_chapter_nav};
//# sourceMappingURL=p-23280f86.entry.js.map