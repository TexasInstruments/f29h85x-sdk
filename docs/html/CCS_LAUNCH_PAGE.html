<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>F29H85x-SDK: Build, Load and Run</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="F29H85x-SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F29H85x-SDK
   &#160;<span id="projectnumber">1.00.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('CCS_LAUNCH_PAGE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Build, Load and Run </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md16">Pre requisites</a></li>
<li class="level1"><a href="#autotoc_md17">Build Configurations</a><ul><li class="level2"><a href="#autotoc_md18">RAM Build Configuration</a></li>
<li class="level2"><a href="#autotoc_md19">FLASH Build Configuration</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md20">Build and Load Program</a></li>
<li class="level1"><a href="#autotoc_md21">Post build sequence for FLASH configuration</a></li>
<li class="level1"><a href="#autotoc_md22">Run and Debug Program</a></li>
<li class="level1"><a href="#autotoc_md23">Build and Load Multicore examples</a><ul><li class="level2"><a href="#autotoc_md24">Build</a></li>
<li class="level2"><a href="#autotoc_md25">Load</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md26">Build and Load SSU examples</a><ul><li class="level2"><a href="#autotoc_md27">Build</a></li>
<li class="level2"><a href="#autotoc_md28">Load</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_getting_started_ccs_launch"></a></p>
<dl class="section note"><dt>Note</dt><dd>The steps on this page should be done each time EVM is power cycled or when a new CCS session is started.</dd></dl>
<h1><a class="anchor" id="autotoc_md16"></a>
Pre requisites</h1>
<ul>
<li>Setup the EVM in 'FLASH' boot mode<ul>
<li>Configure the default BMSPs to high<ul>
<li>GPIO84 is default BMSP0</li>
<li>GPIO72 is default BMSP1</li>
</ul>
</li>
</ul>
</li>
<li>Power on the EVM and launch CCS 20.0.1</li>
</ul>
<h1><a class="anchor" id="autotoc_md17"></a>
Build Configurations</h1>
<ul>
<li>The following build configurations are supported for the majority of the examples<ul>
<li>RAM Build Configuration</li>
<li>FLASH Build Configuration</li>
</ul>
</li>
<li>Some examples have only FLASH or only RAM build configurations</li>
</ul>
<h2><a class="anchor" id="autotoc_md18"></a>
RAM Build Configuration</h2>
<ul>
<li>The example program is loaded into and run from RAM memory</li>
<li>Launch CCS</li>
<li>Import the example CCS project<ul>
<li>Goto "File -&gt; Import Project(s)"</li>
<li>Browse the required example directory within SDK and select the 'ccs' folder which contain the CCS projectspec file<ul>
<li>Discovered projects are listed</li>
<li>Select a project and click 'Finish'  <style>div.image img[src="ccs_import_project.png"]{width:30%}</style> <div class="image">
<img src="ccs_import_project.png" alt=""/>
<div class="caption">
Import CCS project</div></div>
</li>
<li>Select RAM build configuration<ul>
<li>Right click on the project select 'Build Configurations -&gt; RAM'  <style>div.image img[src="ccs_ram_config.png"]{width:40%}</style> <div class="image">
<img src="ccs_ram_config.png" alt=""/>
<div class="caption">
RAM Build Configuration</div></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md19"></a>
FLASH Build Configuration</h2>
<dl class="section note"><dt>Note</dt><dd>The following pre requisites are required<ul>
<li>Install Python 3.X<ul>
<li>Download Python 3.X installer from <a href="https://www.python.org/downloads/windows/">https://www.python.org/downloads/windows/</a></li>
<li>After installtion completion open Windows command prompt and verify below command  <style>div.image img[src="python_version.png"]{width:30%}</style> <div class="image">
<img src="python_version.png" alt=""/>
<div class="caption">
Python Version</div></div>
</li>
</ul>
</li>
<li>Install OpenSSL 3.1.7<ul>
<li>Download openSSL version 3.1.7 installer from <a href="https://slproweb.com/products/Win32OpenSSL.html">https://slproweb.com/products/Win32OpenSSL.html</a></li>
<li>After installation completion add the openSSL path into the PATH environment variable<ul>
<li>Navigate to 'System Properties -&gt; Environment Variables -&gt; System Variables -&gt; Path</li>
<li>Add new entry for 'C:\Program Files\OpenSSL-Win64\bin' and move it up to make it the first entry using 'Move up' button  <style>div.image img[src="openssl_path.png"]{width:30%}</style> <div class="image">
<img src="openssl_path.png" alt=""/>
<div class="caption">
openSSL Path</div></div>
</li>
<li>Open Windows command prompt and verify below command  <style>div.image img[src="openssl_version.png"]{width:50%}</style> <div class="image">
<img src="openssl_version.png" alt=""/>
<div class="caption">
openSSL Version</div></div>
</li>
</ul>
</li>
<li>On MAC installation if build failure due to openSSL certificate generation is observed then below steps should be followed:<ul>
<li>Below mentioned lines should be added to '/etc/ssl/openssl.cnf' file  <style>div.image img[src="openssl_v3_ca.png"]{width:50%}</style> <div class="image">
<img src="openssl_v3_ca.png" alt=""/>
<div class="caption">
openSSL config</div></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</dd></dl>
<ul>
<li>The example program is loaded and run from flash memory</li>
<li>Launch CCS</li>
<li>Import the example CCS project<ul>
<li>Goto "File -&gt; Import Project(s)"</li>
<li>Browse the required example directory within SDK and select the 'ccs' folder which contain the CCS projectspec file<ul>
<li>Discovered projects are listed</li>
<li>Select a project and click 'Finish'  <style>div.image img[src="ccs_import_project.png"]{width:30%}</style> <div class="image">
<img src="ccs_import_project.png" alt=""/>
<div class="caption">
Import CCS project</div></div>
</li>
<li>Select FLASH build configuration<ul>
<li>Default build configuration is RAM, change it to FLASH</li>
<li>Right click on the project select 'Build Configurations -&gt; FLASH'  <style>div.image img[src="ccs_flash_config.png"]{width:40%}</style> <div class="image">
<img src="ccs_flash_config.png" alt=""/>
<div class="caption">
FLASH Build Configuration</div></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md20"></a>
Build and Load Program</h1>
<ul>
<li>Following are the options to build and load an example program<ul>
<li>Build and Load together in a single click<ul>
<li>Righ click on the project and select 'Debug Project (F5)' option  <style>div.image img[src="ccs_debug.png"]{width:30%}</style> <div class="image">
<img src="ccs_debug.png" alt=""/>
<div class="caption">
Debug CCS project</div></div>
</li>
<li>It performs the following sequence<ul>
<li>Builds the project</li>
<li>Executes the 'Post build sequence for FLASH configuration'</li>
<li>Launches the Target Configuration based on the 'TMS320F29H850TU9.ccxml' included in projectspec</li>
<li>Prompts user to select the core to load the program  <style>div.image img[src="ccs_core_select.png"]{width:30%}</style> <div class="image">
<img src="ccs_core_select.png" alt=""/>
<div class="caption">
Select core to load program</div></div>
</li>
<li>Connects to the target core selected in above step</li>
<li>Loads the program onto the selected core</li>
</ul>
</li>
</ul>
</li>
<li>Build and Load separately<ul>
<li>Build<ul>
<li>Right click on the project and select either 'Build Project(s)' or 'Rebuild Project(s)' option  <style>div.image img[src="ccs_build_project.png"]{width:25%}</style> <div class="image">
<img src="ccs_build_project.png" alt=""/>
<div class="caption">
Build CCS project</div></div>
</li>
<li>Upon successful build, example program is generated 'C:\Users\user_id\workspace_ccstheia\timer_ex2_cputimers_syscfg\RAM\' folder</li>
<li>Executes the 'Post build sequence for FLASH configuration'</li>
</ul>
</li>
<li>Connect Target<ul>
<li>Copy the target configuration ccxml (C:\ti\mcu_sdk_f29h85x_1_00_00_00_EA2\examples\device_support\targetconfigs\TMS320F29H850TU9.ccxml) file to 'C:\Users\user_id\ti\CCSTargetConfigurations' folder</li>
<li>Goto 'Debug-&gt;TARGET CONFIGURATION' and refresh, after which the copied ccxml file is discovered  <style>div.image img[src="ccs_target_config.png"]{width:25%}</style> <div class="image">
<img src="ccs_target_config.png" alt=""/>
<div class="caption">
CCS Target Configuration</div></div>
</li>
<li>Launch the taget configuration<ul>
<li>Right click on the ccxml file and select 'Start Project-less Debug' option  <style>div.image img[src="ccs_target_launch.png"]{width:25%}</style> <div class="image">
<img src="ccs_target_launch.png" alt=""/>
<div class="caption">
CCS Target Launch</div></div>
</li>
</ul>
</li>
<li>Connect the desired core<ul>
<li>Right click on the core and select 'Connect Target' option  <style>div.image img[src="ccs_connect_target.png"]{width:25%}</style> <div class="image">
<img src="ccs_connect_target.png" alt=""/>
<div class="caption">
CCS Core Connect</div></div>
</li>
</ul>
</li>
</ul>
</li>
<li>Load<ul>
<li>Load the program either built in previous 'Build' step or any other pre-built one<ul>
<li>Right click on the connected target and select 'Load -&gt; Load Program' option</li>
<li>Browse for the executable .out file and select it  <style>div.image img[src="ccs_load_program.png"]{width:30%}</style> <div class="image">
<img src="ccs_load_program.png" alt=""/>
<div class="caption">
CCS Load Program</div></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md21"></a>
Post build sequence for FLASH configuration</h1>
<ul>
<li>When an example project is built, an ELF file gets created (example.out)</li>
<li>The ELF file is converted into binary format (example.bin) by excluding the following sections<ul>
<li>cert</li>
</ul>
</li>
<li>The binary file is signed with X509 certificate, which creates 'C29-cert-pad.bin' file</li>
<li>The ELF file 'cert' section is updated with the 'C29-cert-pad.bin' file</li>
</ul>
<h1><a class="anchor" id="autotoc_md22"></a>
Run and Debug Program</h1>
<ul>
<li>Run<ul>
<li>Once the program is loaded the core is in 'HALTED' state and the following debug options are available<ul>
<li>Continue (Free Run)<ul>
<li>Runs either to end of the program or to a breakpoint if present</li>
</ul>
</li>
<li>Step Over</li>
<li>Step Into</li>
<li>Step Out</li>
<li>Restart<ul>
<li>Starts from 'main' function</li>
</ul>
</li>
<li>Stop<ul>
<li>Disconnects the target  <style>div.image img[src="ccs_run.png"]{width:30%}</style> <div class="image">
<img src="ccs_run.png" alt=""/>
<div class="caption">
CCS Run</div></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Debug<ul>
<li>The following options are available to debug the loaded program<ul>
<li>Breakpoints<ul>
<li>The program execution halts at a breakpoint</li>
</ul>
</li>
<li>View memory contents<ul>
<li>Goto 'View-&gt;Memory'</li>
<li>Select address and format  <style>div.image img[src="ccs_memory.png"]{width:30%}</style> <div class="image">
<img src="ccs_memory.png" alt=""/>
<div class="caption">
CCS Memory</div></div>
</li>
</ul>
</li>
<li>View Global Variables<ul>
<li>Add global variables to 'Watch' window to view the contents  <style>div.image img[src="ccs_watch.png"]{width:30%}</style> <div class="image">
<img src="ccs_watch.png" alt=""/>
<div class="caption">
CCS Memory</div></div>
</li>
</ul>
</li>
<li>View Core and Peripheral registers<ul>
<li>Goto 'View-&gt;Register' to view the core and peripheral regsters  <style>div.image img[src="ccs_registers.png"]{width:25%}</style> <div class="image">
<img src="ccs_registers.png" alt=""/>
<div class="caption">
CCS Registers</div></div>
</li>
</ul>
</li>
<li>Debug Scripts<ul>
<li>Available under Script dropdown.</li>
<li>Can be used to check or clear ESM, Error Aggregator, Interrupt status etc. <div class="image">
<img src="script-esm.png" alt=""/>
<div class="caption">
Checking the ESM status</div></div>
 <div class="image">
<img src="script-ea.png" alt=""/>
<div class="caption">
Checking the Error Agg status</div></div>
 <div class="image">
<img src="script-ints.png" alt=""/>
<div class="caption">
Checking the Interrupt status</div></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md23"></a>
Build and Load Multicore examples</h1>
<h2><a class="anchor" id="autotoc_md24"></a>
Build</h2>
<ul>
<li>Launch CCS</li>
<li>Import multi core example similar to single core example</li>
<li>Select the Build Configuration similar to single core example</li>
<li>Build the multi core project:<ul>
<li>Right click on the main project and select 'Build Project(s)'  <style>div.image img[src="multi_core_build.png"]{width:40%}</style> <div class="image">
<img src="multi_core_build.png" alt=""/>
<div class="caption">
Multicore Example Build</div></div>
</li>
<li>It builds the projects for multiple CPUs</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md25"></a>
Load</h2>
<ul>
<li>ELF for each core is generated</li>
<li>CPU1 ELF file embeds the ELF of CPU2/CPU3</li>
<li>CPU1 ELF alone is required to be loaded</li>
<li>Only the symbols for CPU2/CPU3 shall be loaded for debug purpose</li>
</ul>
<h1><a class="anchor" id="autotoc_md26"></a>
Build and Load SSU examples</h1>
<h2><a class="anchor" id="autotoc_md27"></a>
Build</h2>
<ul>
<li>The SSU single core and multi core examples support the following FLASH build configuration<ul>
<li>FLASH_HSFS<ul>
<li>For HSFS device type</li>
</ul>
</li>
<li>FLASH_HSSE<ul>
<li>For HSSE device type</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md28"></a>
Load</h2>
<ul>
<li>HSFS<ul>
<li>The example program contains the SSU settings for CPU1/CPU2 and CPU3 as SECCFG sections in the ELF file.</li>
<li>When program is loaded, the CPU1/CPU2 and CPU3 SECCFG sections are programmed into SECCFG sectors, refer to memory map for details on the address range.</li>
</ul>
</li>
<li>HSSE<ul>
<li>The example program doesnot program the CPU1/CPU2 and CPU3 SECCFG sections, instead a binary file containing the certificate for CPU1 SECCFG, and CPU1, CPU2 and CPU3 SECCFG is created. This file shall be used by HSM to program the SECCFG along with the certificate.</li>
<li>A binary image containing the certificate and the example binary is created which is flashed using the UART flash programmer.</li>
<li>For the first time programming the example, UART flash programmer should be used which opens up the C29 debug port post which for the successive programing can be done using CCS.</li>
</ul>
</li>
<li>After loading the example, Power Off and On the EVM so that the new SSU settings get loaded by bootrom and example runs as expected</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>There is a pre built CPU1 ELF file (default_seccfg_bankmode_0_ssumode1.out) is provided along with the SDK at 'mcu_sdk_f29h85xsource_code\c29_sdk\mcu_sdk_f29h85x\source' folder which should be used to reset the contents of CPU1/CPU2 and CPU3 SECCFG sectors. Caution should be exercised to load this only on HSFS device types. </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
