<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>F29H85x-SDK: System Security Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="F29H85x-SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F29H85x-SDK
   &#160;<span id="projectnumber">1.00.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('SSU_TOOL_PAGE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">System Security Configuration </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md838">System Security</a><ul><li class="level2"><a href="#autotoc_md839">General Settings</a><ul><li class="level3"><a href="#autotoc_md840">Global Settings (CPU1 only)</a></li>
<li class="level3"><a href="#autotoc_md841">Boot Settings (CPU1 only)</a></li>
<li class="level3"><a href="#autotoc_md842">Flash Update Ownership (CPU1 only)</a></li>
<li class="level3"><a href="#autotoc_md843">Flash Write/Erase Protections</a></li>
<li class="level3"><a href="#autotoc_md844">Debug Access (CPU1 SSUMODE3 only)</a></li>
<li class="level3"><a href="#autotoc_md845">Register Lock &amp; Commit</a></li>
<li class="level3"><a href="#autotoc_md846">Other Settings</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md847">Quick SSU Setup</a><ul><li class="level3"><a href="#autotoc_md848">Application Module</a><ul><li class="level4"><a href="#autotoc_md849">Peripheral Auto-Allocation</a></li>
</ul>
</li>
<li class="level3"><a href="#autotoc_md850">Sandbox</a></li>
<li class="level3"><a href="#autotoc_md851">Special Modules &amp; Sandboxes</a><ul><li class="level4"><a href="#autotoc_md852">Custom Bootloader Sandbox (STACK1)</a></li>
<li class="level4"><a href="#autotoc_md853">Secure Root Sandbox (STACK2)</a></li>
<li class="level4"><a href="#autotoc_md854">Bootloader Module (LINK1)</a></li>
<li class="level4"><a href="#autotoc_md855">Secure Root Module (LINK2)</a></li>
<li class="level4"><a href="#autotoc_md856">Common Code Module</a></li>
</ul>
</li>
<li class="level3"><a href="#autotoc_md857">Shared Memory</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md858">Auto-Generated Regions</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md859">Memory Regions &amp; Sections</a></li>
<li class="level1"><a href="#autotoc_md860">LINK</a></li>
<li class="level1"><a href="#autotoc_md861">STACK</a></li>
<li class="level1"><a href="#autotoc_md862">Generated Files</a><ul><li class="level2"><a href="#autotoc_md863">seccfg.c</a></li>
<li class="level2"><a href="#autotoc_md864">linker.cmd</a></li>
<li class="level2"><a href="#autotoc_md865">ssu_config.h and ssu_config.c</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_components_alloc_tool_ssu_tool"></a></p>
<dl class="section note"><dt>Note</dt><dd>Currently, SSU Configuration through the Sysconfig tool is only supported for the 4MB Flash variant of the device</dd></dl>
<p>This profile is enabled by adding the System Security module found in the System Security Configuration tab in Sysconfig. When this profile is enabled, all existing configurations done in the Memory Region and Sections modules are subject to the security specifications mentioned in this module, and as such may be automatically updated (and/or) throw warning or error messages that were not applicable to the Memory Allocation profile.</p>
<p>Here, the user can individually customize each option provided by the Safety and Security Unit (SSU). The System Security module contains general SSU settings, as well as an "SSU Setup" section where a user can quickly set up different execution contexts and associated memory protection ranges. For more fine-grained control of these parameters, the user can create set up custom LINKs, STACKs and APRs (created under Memory Regions).</p>
<p>Apart from a custom linker command file, this profile generates a number of additional files, most importantly the seccfg.c file which contains the SECCFG settings for all cores as per user configuration. The CRC for the SECCFG is also computed as part of the Sysconfig tool.</p>
<dl class="section note"><dt>Note</dt><dd>A valid SECCFG CRC value is required for the device to boot successfully, thus it is recommended to use this System Security Configuration tool for making SSU-specific changes to the device configuration.</dd></dl>
<p>The F29x-SDK also includes a post-build script for verifying SECCFG settings on application build, to minimize chances of error.</p>
<h1><a class="anchor" id="autotoc_md838"></a>
System Security</h1>
<p> <style>div.image img[src="ss1.png"]{width:60%}</style> </p><div class="image">
<img src="ss1.png" alt=""/>
<div class="caption">
System Security overview</div></div>
<p>This module contains various configuration groups and easy setup options, allowing users to get security features up and running with minimal effort. Many of these settings are system-level specifications that must be defined by the primary core (CPU1), and as such, are not present in non-primary SysConfig contexts when operating in a multi-core environment.</p>
<h2><a class="anchor" id="autotoc_md839"></a>
General Settings</h2>
<p>This section contains several configurations that are device-wide and may be permanent/unmodifiable under normal runtime conditions. User must take care to set these up as per the requirements of the application.</p>
<h3><a class="anchor" id="autotoc_md840"></a>
Global Settings (CPU1 only)</h3>
<p>Here, user can configure the SSU operation mode, which is the broadest specification of the level of safety and security features activated. Based on the selected SSUMODE, various additional configuration options may become available.</p>
<dl class="section note"><dt>Note</dt><dd>SSUMODE3 is currently not available in the tool, and will be supported in a future release of the SDK</dd>
<dd>
LINKs, STACKs and related SSU configurations are available in the SysConfig UI when in SSUMODE1 but will only be actually implemented via seccfg.c in SSUMODE2 and SSUMODE3.</dd></dl>
<p> <style>div.image img[src="ss2.png"]{width:60%}</style> </p><div class="image">
<img src="ss2.png" alt=""/>
<div class="caption">
SSUMODE1 SECCFG</div></div>
<p> <style>div.image img[src="ss3.png"]{width:60%}</style> </p><div class="image">
<img src="ss3.png" alt=""/>
<div class="caption">
SSUMODE2 SECCFG</div></div>
<p>User can also configure the UPP Revision and enable other cores for System Security Configuration. For multi-core operation, the required cores must be enabled here by CPU1. Core-specific configurations can be done in the respective SysConfig contexts. The corresponding core must also be added in the "MULTI CORE" section in SysConfig.</p>
<h3><a class="anchor" id="autotoc_md841"></a>
Boot Settings (CPU1 only)</h3>
<p>Device boot related configurations and boot pin combinations are be customized here. The device default boot pin combination is available on launch, which can be customized by unchecking the "Use default boot modes" checkbox.</p>
<p> <style>div.image img[src="ss4.png"]{width:60%}</style> </p><div class="image">
<img src="ss4.png" alt=""/>
<div class="caption">
Custom boot mode configuration</div></div>
<p>During device boot execution in LINK1, a specific combination of APR(s) is required to be already defined in SECCFG, the specifics of which vary based on the selected boot mode. To simplify this process, SysConfig will automatically create optimally segregated peripheral APR(s) based on selected boot settings and further application APR requirements. More information on peripheral APR auto-allocation is provided in the Application Module section</p>
<h3><a class="anchor" id="autotoc_md842"></a>
Flash Update Ownership (CPU1 only)</h3>
<p>Flash update owners for SECCFG and each of the SSU ZONEs can be setup here. For each, user can configure the owner CPU and LINK, and whether flash updates are enabled.</p>
<h3><a class="anchor" id="autotoc_md843"></a>
Flash Write/Erase Protections</h3>
<p>Write/Erase (WE) protections are configured here. This can be specified at a Code/Data bank level or customized for selected Flash Memory Regions. For each flash bank, individual WE protection can be done for the first 32 sectors, and in groups of 8 sectors for the rest of the bank. This is automatically handled by the tool, and memory regions are allocated to allow flexibility in individual WE protection configuration.</p>
<p> <style>div.image img[src="ss5.png"]{width:60%}</style> </p><div class="image">
<img src="ss5.png" alt=""/>
<div class="caption">
WE protection for banks and individual Flash APRs</div></div>
<h3><a class="anchor" id="autotoc_md844"></a>
Debug Access (CPU1 SSUMODE3 only)</h3>
<p>Here, user can specify C29-level and ZONE-level debug authorization and passwords. This is only configurable in SSUMODE3, which is currently not supported in the Sysconfig tool.</p>
<h3><a class="anchor" id="autotoc_md845"></a>
Register Lock &amp; Commit</h3>
<p>Lock and commit settings for various SECCFG registers are done here. This include settings that may be unmodifiable until the next device reset and must be configured carefully.</p>
<h3><a class="anchor" id="autotoc_md846"></a>
Other Settings</h3>
<p>This tab allows user to specify the LINKs that are allowed to record entries in the FIFO of the Data Logger and Trace (DLT) module. Refer to the DLT section in the TRM for further details.</p>
<h2><a class="anchor" id="autotoc_md847"></a>
Quick SSU Setup</h2>
<p>This section, available under the "SSU Setup" tab, allows the user to configure Application Modules, Sandboxes and Shared Memory Regions. The diagrams below relate these software terms to the hardware concepts of APR, LINK, STACK and ZONE.</p>
<p> <style>div.image img[src="ssuhwmap1.png"]{width:60%}</style> </p><div class="image">
<img src="ssuhwmap1.png" alt=""/>
<div class="caption">
Hardware relationship</div></div>
<p> <style>div.image img[src="ssuswmap1.png"]{width:60%}</style> </p><div class="image">
<img src="ssuswmap1.png" alt=""/>
<div class="caption">
Software teminology - Hardware mapping</div></div>
<p> <style>div.image img[src="ssuswmap2.png"]{width:60%}</style> </p><div class="image">
<img src="ssuswmap2.png" alt=""/>
<div class="caption">
Software relationship</div></div>
<dl class="section note"><dt>Note</dt><dd>This is a simplified representation. For further information, refer application note Implementing Run-Time Safety and Security Protections With the C29x SSU (SPRADK2), and the SSU section in the TRM.</dd></dl>
<p>At the top-level, user can specify the size of the Flash APR to be used as Load memory for sections such as .cinit, .binit and copy tables. The user can also enable/disable a number of "special" Application Modules and Sandboxes, which are detailed in a below section.</p>
<h3><a class="anchor" id="autotoc_md848"></a>
Application Module</h3>
<p>An Application Module is a basic partition of a system application. Each module consists of a single LINK, one or more code memory APRs (Memory Regions) containing the LINK’s code, all data memory APRs associated with the LINK, and all peripherals and interrupts associated with the Application Module. Typically, the code APRs contain .text and other linker output sections containing code, and the data APRs contain .bss,.const and other linker output sections containing data and variables.</p>
<p>User can enter the files and libraries to be included in each application module, and further specify custom code and data sections on top of the default ones.</p>
<p> <style>div.image img[src="appmodule1.png"]{width:60%}</style> </p><div class="image">
<img src="appmodule1.png" alt=""/>
<div class="caption">
Application Module</div></div>
<p> <style>div.image img[src="appmodule3.png"]{width:60%}</style> </p><div class="image">
<img src="appmodule3.png" alt=""/>
<div class="caption">
Sections for Application Module's APRs</div></div>
<p>For each application module, up to 4 APRs can be configured by adding their sizes:</p>
<ul>
<li>Flash Code APR : For general code belonging to this Application Module</li>
<li>RAM Code APR : For code sections that need to be run from RAM memory</li>
<li>RW Data APR in RAM : Used for .bss and .data sections</li>
<li>RO Data APR in Flash : Used for .rodata and .const sections</li>
</ul>
<p> <style>div.image img[src="appmodule2.png"]{width:60%}</style> </p><div class="image">
<img src="appmodule2.png" alt=""/>
<div class="caption">
Generated APRs and LINK</div></div>
<p>Availability of these regions is dependent on the current core and BANKMODE configurations</p>
<p>If any of these APRs is not required, it can be removed by specifying the corresponding size as 0. There is also the option to place certain sections entirely in RAM, and combine RW data sections, available in the Sections tab. As with memory regions, the placement of these APRs in RAM/Flash memory is automatically handled by the tool.</p>
<h4><a class="anchor" id="autotoc_md849"></a>
Peripheral Auto-Allocation</h4>
<p>For each Application Module, user can grant Read-Only (RO) and Read-Write (RW) access to relevant peripherals. It is possible for there to be overlap in peripherals between modules, leading to the requirement for a number of APRs with different access permissions. In order to simplify the experience for the user and minimize the APR usage, the tool will automatically create Peripheral APRs for each CPU based on the access permissions given for every Application Module. These regions are "implicitly" created and can be viewed by opening the Memory Summary view in the tool.</p>
<p> <style>div.image img[src="periphautodiag.png"]{width:50%}</style> </p><div class="image">
<img src="periphautodiag.png" alt=""/>
<div class="caption">
Peripheral APRs auto-allocation logic</div></div>
<p>In case the user is dissatisfied with the automatic peripheral APR combination done by the tool, they can create APRs manually through the Memory Regions window in Sysconfig, then provide appropriate access in the LINK window. Note that the same peripheral cannot be included in automatic and manual APR creation</p>
<p>Interrupts belonging to each Application Module can also be configured in the "Peripheral Access" subsection.</p>
<dl class="section note"><dt>Note</dt><dd>All interrupts must belong to the same SSU hardware STACK</dd></dl>
<p>All the generated Memory Regions (except the auto allocated Peripheral APRs) and the associated LINK can be found in the Auto-Generated Components tab and are also available in their respective SysConfig module pages.</p>
<dl class="section note"><dt>Note</dt><dd>Since these are added by the System Security module, they cannot be directly edited in their respective module pages (with some exceptions). Any changes required can be made directly in the System Security module.</dd></dl>
<h3><a class="anchor" id="autotoc_md850"></a>
Sandbox</h3>
<p>Sandboxes provide security and safety isolation within a CPU. Each Sandbox is associated with a STACK, and a stack memory APR in the SSU. Each sandbox has a dedicated physical stack pointer in the CPU that is inaccessible by other sandboxes, and a dedicated stack memory APR with read/write permissions restricted to only code belonging to that sandbox. Special C29 CPU gate instructions are required when crossing from one STACK to another. Each STACK belongs to one ZONE, but a ZONE can contain multiple STACKs.</p>
<p>For a Sandbox, user can specify the Application Modules that are in the corresponding STACK, and the ZONE that the STACK belongs to. Due to the design of APRs limiting granularity to 4kB, user can specify the "Actual Stack Size" to be used in bytes. The created stack memory APR will be RW accessible to all the LINKs in the STACK, and the remaining space can be used store additional data sections, which can also be configured in the Stack Memory Region tab.</p>
<p> <style>div.image img[src="sandbox1.png"]{width:60%}</style> </p><div class="image">
<img src="sandbox1.png" alt=""/>
<div class="caption">
Sandbox overview</div></div>
<dl class="section note"><dt>Note</dt><dd>To simplify user experience, only the LINKs created though Application Module tab can be added to a Sandbox. To generate custom LINKs and STACKs, add these separately in the respective Sysconfig modules</dd></dl>
<p>Code sections placed in each STACK are placed in separate Secure Groups. The desired behavior for unprotected cross-STACK calls can also be setup here, i.e. whether linker error is generated (PRIVATE, which is the default setting), or linker generates trampolines and landing pads (PUBLIC / PUBLIC_TRUSTED)</p>
<p> <style>div.image img[src="sandbox2.png"]{width:60%}</style> </p><div class="image">
<img src="sandbox2.png" alt=""/>
<div class="caption">
Sandbox - Generated linker sections</div></div>
<p>A Sandbox for STACK2 is added by default in System Security, since this is the primary User STACK used by the application.</p>
<h3><a class="anchor" id="autotoc_md851"></a>
Special Modules &amp; Sandboxes</h3>
<p>This tab contains the option to setup a number of "special" Application Modules and Sandboxes that are commonly present in every application, with preconfigured settings for each of them. These special modules are added by default but can be removed (other than STACK2) by unchecking the checkbox based on application need.</p>
<p> <style>div.image img[src="specialmodules.png"]{width:60%}</style> </p><div class="image">
<img src="specialmodules.png" alt=""/>
<div class="caption">
Special Modules &amp; Sandboxes - Setup</div></div>
<h4><a class="anchor" id="autotoc_md852"></a>
Custom Bootloader Sandbox (STACK1)</h4>
<p>This is the Bootloader STACK, which is always enabled in hardware. In order to set up custom bootloader, user can enable this module in Sysconfig. STACK1 can optionally be used in application. Bootloader Module (LINK1) is always associated with STACK1, and STACK1 is always in ZONE1</p>
<h4><a class="anchor" id="autotoc_md853"></a>
Secure Root Sandbox (STACK2)</h4>
<p>This is the primary user stack with secure root permissions, and is always enabled. Secure Root Module (LINK2) is always associated with this Sandbox</p>
<h4><a class="anchor" id="autotoc_md854"></a>
Bootloader Module (LINK1)</h4>
<p>This is the Bootloader LINK, which can optionally be used in application. LINK1 is granted access to certain peripheral and device configuration registers based on the selected boot mode combinations, which is automatically added by the tool. These regions are mandatory for device booting, therefore the tool will throw error if LINK1 is not granted access to these regions (either through the Application Module dropdown, or through manually created peripheral APRs). The below picture shows an example of 4 configured boot modes, and the auto-created peripheral APRs for this combination</p>
<p> <style>div.image img[src="bootperiph.png"]{width:50%}</style> </p><div class="image">
<img src="bootperiph.png" alt=""/>
<div class="caption">
Auto-configured Boot Peripheral APRs for LINK1</div></div>
<p>LINK1 also has RO access to the Flash Certificate APR, which is always placed at 0x10000000</p>
<h4><a class="anchor" id="autotoc_md855"></a>
Secure Root Module (LINK2)</h4>
<p>This is the primary user LINK used in application. CPU1.LINK2 is the system security root LINK (SROOT) and has special fixed permissions that enable access to system configuration registers and override controls. Sections from the F29 driverlib that need security root permissions, and libraries like libc.a are placed in this module by default.</p>
<h4><a class="anchor" id="autotoc_md856"></a>
Common Code Module</h4>
<p>This Module can be used for libraries or functions that are used across modules (such as F29 driverlib) can be placed in this module. This Module is granted <b>Access Protection Inheritance (API)</b> by default, i.e. it inherits the caller module's accesses to memory regions and peripherals. Common Code Module cannot be granted direct access to peripherals, it instead inherits these as well.</p>
<p> <style>div.image img[src="commoncode.png"]{width:60%}</style> </p><div class="image">
<img src="commoncode.png" alt=""/>
<div class="caption">
Common Code Module - Access Protection Inheritance to all Data APRs</div></div>
<h3><a class="anchor" id="autotoc_md857"></a>
Shared Memory</h3>
<p>Shared Memory regions are special APRs that are accessible by multiple Application Modules. Adding this module creates a Data Memory Region in RAM/Flash, for which user can specify the Application Modules that need RO and RW permissions. Data sections can also be customized.</p>
<dl class="section note"><dt>Note</dt><dd>Shared Memory is meant for Data APRs in a single core that are used by multiple LINKs. This is distinct from sharing a Memory Region / APR with other cores, which must be configured separately.</dd></dl>
<p> <style>div.image img[src="sharedmem1.png"]{width:50%}</style> </p><div class="image">
<img src="sharedmem1.png" alt=""/>
<div class="caption">
Shared Memory - Creation</div></div>
<p> <style>div.image img[src="sharedmem2.png"]{width:50%}</style> </p><div class="image">
<img src="sharedmem2.png" alt=""/>
<div class="caption">
Shared Memory - Permissions</div></div>
<h2><a class="anchor" id="autotoc_md858"></a>
Auto-Generated Regions</h2>
<p>System Security also automatically generates the APRs for the CPU1 Flash Certificate (which must always be placed at 0x10001000), and each core's Flash Load APR, which can be viewed under the Auto-Generated Regions tab.</p>
<p> <style>div.image img[src="autogenregions.png"]{width:50%}</style> </p><div class="image">
<img src="autogenregions.png" alt=""/>
<div class="caption">
Auto-generates Flash APRs</div></div>
<h1><a class="anchor" id="autotoc_md859"></a>
Memory Regions &amp; Sections</h1>
<p>In the System Security Configuration profile, Memory Regions are equivalent to APRs. Apart from the auto-generated APRs configured through SSU Setup, additional custom APRs can also be added in the Memory Regions page in SysConfig. With System Security enabled, user also has the ability to create Peripheral Memory Regions. Here, unlike the peripheral setup in Application Modules, the peripherals selected for an APR must be contiguous in memory, since they need to be covered in a single region. The selected peripherals must also not have any conflicts with the auto-allocated peripheral APRs.</p>
<p> <style>div.image img[src="periphManual.png"]{width:50%}</style> </p><div class="image">
<img src="periphManual.png" alt=""/>
<div class="caption">
Manual Peripheral APR creation</div></div>
<p>Remaining Memory Region configurations remain largely the same. A total of 64 APRs per core can be added on SysConfig. However, since a number of APRs are created "implicitly", they are not directly visible in the Memory Regions module page. A full list of created APRs can be viewed in the Memory Summary view, which is explained further in the main page.</p>
<p>Sections module functions the same as in Memory Allocation profile.</p>
<h1><a class="anchor" id="autotoc_md860"></a>
LINK</h1>
<p>Aside from the LINKs auto configured through Application Modules in Quick Setup, additional custom LINKs can also be added. Each LINK has customizable access permissions for Memory Regions, and Interrupt configuration. There is also the option to designate a LINK as LINK1 or LINK2 (if these haven't been already configured through Quick Setup or another LINK instance). This will automatically assign the LINK certain special permissions based on the selection. Up to 15 LINKs per core can be added via SysConfig.</p>
<p> <style>div.image img[src="linkmod1.png"]{width:50%}</style> </p><div class="image">
<img src="linkmod1.png" alt=""/>
<div class="caption">
Manual LINK creation</div></div>
<p>For LINKs created via Application Modules, additional region permissions can also be added from here</p>
<p> <style>div.image img[src="linkmod2.png"]{width:60%}</style> </p><div class="image">
<img src="linkmod2.png" alt=""/>
<div class="caption">
Adding memory region access to auto-generated LINK</div></div>
<h1><a class="anchor" id="autotoc_md861"></a>
STACK</h1>
<p>Similarly, outside of the Sandbox generated STACKS, user can add custom STACK modules directly in SysConfig. Configurations remain the same as Sandbox. Up to 7 STACKs per core can be added via SysConfig.</p>
<p> <style>div.image img[src="stackmod1.png"]{width:50%}</style> </p><div class="image">
<img src="stackmod1.png" alt=""/>
<div class="caption">
Manual STACK creation</div></div>
<h1><a class="anchor" id="autotoc_md862"></a>
Generated Files</h1>
<p> <style>div.image img[src="genfiles_sysec.png"]{width:40%}</style> </p><div class="image">
<img src="genfiles_sysec.png" alt=""/>
<div class="caption">
Generated Files</div></div>
<p>The System Security Configuration profile generates a number of files, which can be found under the "C29 Security" category.</p>
<h2><a class="anchor" id="autotoc_md863"></a>
seccfg.c</h2>
<p> <style>div.image img[src="seccfg.png"]{width:50%}</style> </p><div class="image">
<img src="seccfg.png" alt=""/>
<div class="caption">
seccfg.c</div></div>
<p>The seccfg.c file contains all the configured user protection policy settings, SSU configurations and boot settings for the core, in a C structure format. These are programmed into the NONMAIN Flash SECFFG region of each core. The SECCFG address is programmed at different addresses depending on current BANKMODE, which is handled by the tool. To protect the integrity of the SSU user protection policy, the SECCFG sector also includes a CRC value that is checked at boot time. This CRC is auto calculated by the tool.</p>
<dl class="section note"><dt>Note</dt><dd>It is strongly advised not to manually edit this file. Invalid SECCFG settings may prevent the device from booting and leave it in an unrecoverable state.</dd></dl>
<p>In SSUMODE1, SECCFG settings related to APR, LINK and STACK are configured to their default values. Remaining SSU settings can be configured.</p>
<p> <style>div.image img[src="seccfg_crc.png"]{width:50%}</style> </p><div class="image">
<img src="seccfg_crc.png" alt=""/>
<div class="caption">
SECCFG CRC (auto calculated by tool)</div></div>
<h2><a class="anchor" id="autotoc_md864"></a>
linker.cmd</h2>
<p>The tool generates the linker.cmd file based on the selected options in the GUI. For user-defined Sections, entries will only show up when that specific section has a valid “Load Memory” entry selected</p>
<p>For System Security Configuration profile, Sections are automatically inserted for each configured APR, based on the type of data is contains. Appropriate SECURE_GROUP tags are also automatically inserted by the tool</p>
<p> <style>div.image img[src="linkerpic2.png"]{width:60%}</style> </p><div class="image">
<img src="linkerpic2.png" alt=""/>
<div class="caption">
linker.cmd in System Security Configuration profile</div></div>
<p>In case of Multi-Core System Security Configuration, additional memory regions are generated on CPU1. This includes a Flash Memory region covering the Flash data of other cores, and a RAM-cover region spanning the Data RAM of other cores. These regions are used by CPU1 during runtime to copy Flash data to RAM for cores that don't have Flash access</p>
<p> <style>div.image img[src="linkerpic1.png"]{width:50%}</style> </p><div class="image">
<img src="linkerpic1.png" alt=""/>
<div class="caption">
Additional memory regions on CPU1 in multi-core</div></div>
<h2><a class="anchor" id="autotoc_md865"></a>
ssu_config.h and ssu_config.c</h2>
<p>The header file provides macros for every APR, LINK and STACK which can be used in application. ssu_config.c configures the functions for setting up Interrupt-LINK mapping and enabling DLT FIFO access for LINKs.</p>
<p> <style>div.image img[src="ssuconfig1.png"]{width:60%}</style> </p><div class="image">
<img src="ssuconfig1.png" alt=""/>
<div class="caption">
ssu_config.c APIs</div></div>
<p>These functions are bundled under the SSU_init() available from board.h, which must be called in application to initialize these settings</p>
<p> <style>div.image img[src="ssuconfig2.png"]{width:60%}</style> </p><div class="image">
<img src="ssuconfig2.png" alt=""/>
<div class="caption">
SSU_init() - Common initialization function from board.h</div></div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
