<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<title>F29H85x-SDK: Configure using Pre-defined Resources (CONFIGURE Mode)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="F29H85x-SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F29H85x-SDK
   &#160;<span id="projectnumber">1.02.02.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <span id="MSearchSelectExt">&#160;</span>
              <input type="text" id="MSearchField" name="query" value="" placeholder="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('CONFIGURE_PAGE.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Configure using Pre-defined Resources (CONFIGURE Mode)</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md300">Overview</a><ul><li class="level2"><a href="#autotoc_md301">Clocktree</a></li>
<li class="level2"><a href="#autotoc_md302">SysCtl</a></li>
<li class="level2"><a href="#autotoc_md303">RTDMA</a></li>
<li class="level2"><a href="#autotoc_md304">SPI</a></li>
<li class="level2"><a href="#autotoc_md305">Memory &amp; System Security</a></li>
<li class="level2"><a href="#autotoc_md306">Other modules using Allocated Resources</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md307">Generated Code</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_C_1_2anandyk_2C29_2SDK_2source__code_2c29__sdk__docs_2docs__src_2docs_2api__guide_2components_2resource__allocator_2configure"></a></p>
<p>To enter CONFIGURE mode, select "Configure using Predefined Resource Allocations" in the SysConfig start menu, and specify the required context (core), and the path to the allocation file (resourceAllocation.json) created in SETUP mode.</p>
<p> <style>div.image img[src="cfg_start.png"]{width:60%}</style> </p><div class="image">
<img src="cfg_start.png" alt=""/>
<div class="caption">
CONFIGURE mode in SysConfig startup menu</div></div>
<dl class="section note"><dt>Note</dt><dd>The JSON file mentions the specific version of the SysConfig tool used to create the file in SETUP mode. Please ensure you use the same version of SysConfig when loading up the tool in CONFIGURE mode.  <style>div.image img[src="cfg_vernote.png"]{width:50%}</style> <div class="image">
<img src="cfg_vernote.png" alt=""/>
<div class="caption">
Tool version in resourceAllocation.json</div></div>
</dd></dl>
<h1><a class="anchor" id="autotoc_md300"></a>
Overview</h1>
<p>In CONFIGURE mode, all the settings specified in SETUP mode are picked up from the JSON file and enforced by SysConfig, i.e. set to a read-only state. In case of limited HW resources, an instance of the module can only be created if an instance was created and assigned to the current core in SETUP mode. This means that each CPUx.syscfg file can be opened independently just by providing the JSON as an input, and each CPUx user can only use the resources allocated to their core.</p>
<p> <style>div.image img[src="cfg_overview.png"]{width:70%}</style> </p><div class="image">
<img src="cfg_overview.png" alt=""/>
<div class="caption">
Glance at CONFIGURE mode</div></div>
<p>In case of limited HW resources that are assigned to specific cores, the user has the ability to add an instance(s) of the module, and select the <b>Allocation</b> for it, which corresponds to the array of instances allocated by SETUP mode.</p>
<p> <style>div.image img[src="cfg_allocation.png"]{width:40%}</style> </p><div class="image">
<img src="cfg_allocation.png" alt=""/>
<div class="caption">
Allocation option</div></div>
<p>The list of Allocation options matches the names of the instances created in SETUP mode. Therefore, it is beneficial to assign a descriptive name, based on some functional characteristic, to each instance in SETUP so that the CONFIGURE mode user can easily distinguish between them. Based on the selected Allocation, the settings specified in SETUP mode will automatically be enforced, while remaining module settings can be configured freely.</p>
<p>In the following sections, a few different types of modules are described in detail in order to further elucidate the CONFIGURE mode process. The following allocations have been performed in SETUP mode:</p>
<p> <style>div.image img[src="cfg_diag.png"]{width:50%}</style> </p><div class="image">
<img src="cfg_diag.png" alt=""/>
<div class="caption">
Allocations performed in SETUP mode</div></div>
<h2><a class="anchor" id="autotoc_md301"></a>
Clocktree</h2>
<p>All configurables such as input sources and dividers are locked to the values specified in SETUP and are now read-only.</p>
<p> <style>div.image img[src="cfg_clk.png"]{width:70%}</style> </p><div class="image">
<img src="cfg_clk.png" alt=""/>
<div class="caption">
Clocktree in CONFIGURE mode</div></div>
<h2><a class="anchor" id="autotoc_md302"></a>
SysCtl</h2>
<p>Modules like SysCtl, which define integral system configurations are added <em>by default</em> in CONFIGURE mode if detected in the JSON and cannot be removed. The configurations specified in SETUP are locked, whereas the remaining configs can be edited as required for each core.</p>
<p> <style>div.image img[src="cfg_sysctl.png"]{width:50%}</style> </p><div class="image">
<img src="cfg_sysctl.png" alt=""/>
<div class="caption">
SysCtl in CONFIGURE mode</div></div>
<h2><a class="anchor" id="autotoc_md303"></a>
RTDMA</h2>
<p>In RTDMA, the static module is added by default similar to SysCtl, and the required code is generated on CPU1. This ensures that the appropriate setup is done even if RTDMA channel instances are only added on other cores. The channels themselves can be added on each core as required, provided they have been allocated in SETUP mode.</p>
<p> <style>div.image img[src="cfg_dma1.png"]{width:70%}</style> </p><div class="image">
<img src="cfg_dma1.png" alt=""/>
<div class="caption">
RTDMA in CONFIGURE mode</div></div>
<p>Here, there is only one RTDMA channel allocated to CPU1 which is associated to an SPI instance. It can, however, be added individually in SysConfig. The same applies for the channel allocated to CPU3 as well.</p>
<p> <style>div.image img[src="cfg_dma2.png"]{width:70%}</style> </p><div class="image">
<img src="cfg_dma2.png" alt=""/>
<div class="caption">
Configuring linked channel instance individually</div></div>
<h2><a class="anchor" id="autotoc_md304"></a>
SPI</h2>
<p>As many SPI instances can be created on each core as are allocated in SETUP. In our case, up to 2 instances can be added in CPU1, up to 1 instance on CPU3, and no instances on CPU2. All SETUP mode configurables are locked as expected. If mySPI1 allocation is used on CPU1 (or mySPI2 on CPU3), the linked RTDMA channel is also automatically added.</p>
<p> <style>div.image img[src="cfg_spi.png"]{width:70%}</style> </p><div class="image">
<img src="cfg_spi.png" alt=""/>
<div class="caption">
SPI with linked RTDMA in CONFIGURE mode</div></div>
<p>As seen above, only the instances allocated to CPU1 can be selected in the allocation field on CPU1.</p>
<h2><a class="anchor" id="autotoc_md305"></a>
Memory &amp; System Security</h2>
<dl class="section note"><dt>Note</dt><dd>The Memory Region, System Security, LINK and STACK modules are not directly available in the CONFIGURE mode UI in F29H85x-SDK v1.02. If added in SETUP mode, the associated code will be automatically generated as per settings taken from the JSON. UI support will be added in a future release of the SDK</dd></dl>
<p>Modules associated with Memory and System Security are not present in the CONFIGURE mode UI, but the associated files are generated on all applicable cores.</p>
<p> <style>div.image img[src="cfg_ssu1.png"]{width:70%}</style> </p><div class="image">
<img src="cfg_ssu1.png" alt=""/>
<div class="caption">
Files generated by Memory &amp; System Security modules</div></div>
<p> <style>div.image img[src="cfg_ssu2.png"]{width:70%}</style> </p><div class="image">
<img src="cfg_ssu2.png" alt=""/>
<div class="caption">
seccfg.c generated by System Security</div></div>
<p>The Sections module is present, and can be used to create user sections and assign to the Memory Regions created in SETUP mode</p>
<p> <style>div.image img[src="cfg_section.png"]{width:70%}</style> </p><div class="image">
<img src="cfg_section.png" alt=""/>
<div class="caption">
Sections module in CONFIGURE mode</div></div>
<p>An updated SSU Summary view is available in the Options dropdown, alongside the Memory Summary view from STANDARD mode.</p>
<p> <style>div.image img[src="ssu_sum1.png"]{width:60%}</style> </p><div class="image">
<img src="ssu_sum1.png" alt=""/>
<div class="caption">
SSU Summary : APR mappings in CONFIGURE mode</div></div>
<p> <style>div.image img[src="ssu_sum2.png"]{width:60%}</style> </p><div class="image">
<img src="ssu_sum2.png" alt=""/>
<div class="caption">
SSU Summary : LINK &amp; STACK mappings in CONFIGURE mode</div></div>
<h2><a class="anchor" id="autotoc_md306"></a>
Other modules using Allocated Resources</h2>
<p>Modules not specified in SETUP mode are free to be added, the same as in STANDARD mode.</p>
<p>For modules that might add instances of underlying resources, the same can be added as long as there is a free instance of the resource available. For e.g., consider the Data Transfer module, which can use a variety of communications HW to export data.</p>
<p>If SPI is chosen as the Communication Link, then this module creates a connected SPI instance, for which any of the allocated SPI instances can be used (provided they have not already been used)</p>
<p> <style>div.image img[src="cfg_other1.png"]{width:70%}</style> </p><div class="image">
<img src="cfg_other1.png" alt=""/>
<div class="caption">
Using allocated SPI instance</div></div>
<p>If UART is chosen as the communication link instead, we see an error, since no UART instances have been allocated to our core. Thus, it is a pre-requisite to have an instance of a resource before creating an instance of it (or) creating an instance of a module that requires the resource.</p>
<p> <style>div.image img[src="cfg_other2.png"]{width:50%}</style> </p><div class="image">
<img src="cfg_other2.png" alt=""/>
<div class="caption">
Using unallocated UART instance</div></div>
<h1><a class="anchor" id="autotoc_md307"></a>
Generated Code</h1>
<p>The generated files remain the same as in the STANDARD mode and directly correlate to the modules allocated to / created on the current core. In addition, CPU1 generates code related to PinMux settings and other device-wide configurations for <b>all cores</b>. Data for generating this code is taken directly from the JSON file, meaning that all the Sysconfig files do not need to be opened simultaneously for complete initialization.</p>
<p> <style>div.image img[src="cfg_code.png"]{width:70%}</style> </p><div class="image">
<img src="cfg_code.png" alt=""/>
<div class="caption">
Code Generation in CONFIGURE mode</div></div>
<p>Such blocks of code can be found in files like board.c, board.h, pinmux.csv, peripheral_frame_mapping.h etc, and will be generated even if the associated resource instance is not added to the current core. In addition, files for Memory and System Security modules are completely auto-generated for all cores based on the settings configured in SETUP. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
