<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<title>F29H85x-SDK: ESM</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="F29H85x-SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F29H85x-SDK
   &#160;<span id="projectnumber">1.02.02.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <span id="MSearchSelectExt">&#160;</span>
              <input type="text" id="MSearchField" name="query" value="" placeholder="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('SDL_ESM_PAGE.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">ESM</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_C_1_2anandyk_2C29_2SDK_2source__code_2c29__sdk__docs_2docs__src_2docs_2api__guide_2components_2sdl_2esm"></a> The Error Signaling Module (ESM) aggregates safety-related events and/or errors from throughout the device into one location. It can signal both low and high priority interrupts to a processor to deal with a safety event and/or manipulate an I/O error pin to signal an external hardware that an error has occurred. Therefore an external controller is able to reset the device or keep the system in a safe, known state.</p>
<p>The SDL provides APIs to do the following:</p>
<ul>
<li>Perform a read back ESM registers</li>
<li>Set the ESM error forcing mode</li>
<li>Perform ESM initialization sequence/configurations</li>
<li>Perform a test of the ESM register parity logic</li>
<li>Get/clear ESM raw error status</li>
<li>Handle ESM interrupts</li>
<li>Lock/unlock key ESM registers</li>
</ul>
<h1><a class="anchor" id="autotoc_md260"></a>
ESM Interrupt Handling</h1>
<p>The SDL provides several functions related to the handling of ESM interrupts. The user is required to register two ISRs in the PIPE, one for low priority ESM interrupts and one for high priority ESM interrupts (the non-maskable interrupt or NMI) and demonstrated in many of the SDL examples.</p>
<p>The recommended interrupt handling routine should resemble the function below.</p>
<div class="fragment"><div class="line">__attribute__((interrupt(<span class="stringliteral">&quot;INT&quot;</span>)))</div>
<div class="line">static <span class="keywordtype">void</span> esmLowPriISR(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="structSDL__ESM__IntrStatus.html">SDL_ESM_IntrStatus</a> intrStatus;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">do</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Get ESM event status and try to clear event that caused the</span></div>
<div class="line"><span class="comment">         * interrupt.</span></div>
<div class="line"><span class="comment">        /*</span></div>
<div class="line"><span class="comment">        SDL_ESM_loInterruptHandler(SDL_ESMCPU1_BASE, &amp;intrStatus);</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">        /*</span></div>
<div class="line"><span class="comment">         * Take action based on the intrStatus.selfTestStatus and</span></div>
<div class="line"><span class="comment">         * intrStatus.highestPendPulseEvent status.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * If intrStatus.nextPendPulseEvent is set to SDL_ESM_NO_EVENT_VALUE, the</span></div>
<div class="line"><span class="comment">     * SDL_ESM_loInterruptHandler() function was able to clear all pending</span></div>
<div class="line"><span class="comment">     * events for which interrupts are enabled.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    }<span class="keywordflow">while</span>(intrStatus.<a class="code hl_variable" href="structSDL__ESM__IntrStatus.html#addc12c6658e6e258d91c485013aac9b8">nextPendPulseEvent</a> != <a class="code hl_define" href="group__sdl__esm__group.html#gad86392cd5b819025cdb4ad523122898e">SDL_ESM_NO_EVENT_VALUE</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group__sdl__esm__group.html#ga1bbe5ffaefd5c69bbb1d5df39af9e8ac">SDL_ESM_writeEOI</a>(SDL_ESMCPU1_BASE, <a class="code hl_define" href="group__sdl__esm__group.html#ga62eb8ddc7aa3d5f843eeaecb543b65b7">SDL_ESM_INTR_TYPE_LOW_PRIO_ERROR</a>);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__sdl__esm__group_html_ga1bbe5ffaefd5c69bbb1d5df39af9e8ac"><div class="ttname"><a href="group__sdl__esm__group.html#ga1bbe5ffaefd5c69bbb1d5df39af9e8ac">SDL_ESM_writeEOI</a></div><div class="ttdeci">int32_t SDL_ESM_writeEOI(uint32_t esmBase, SDL_ESM_IntrType intrType)</div><div class="ttdoc">This API is used to write EOI.</div></div>
<div class="ttc" id="agroup__sdl__esm__group_html_ga62eb8ddc7aa3d5f843eeaecb543b65b7"><div class="ttname"><a href="group__sdl__esm__group.html#ga62eb8ddc7aa3d5f843eeaecb543b65b7">SDL_ESM_INTR_TYPE_LOW_PRIO_ERROR</a></div><div class="ttdeci">#define SDL_ESM_INTR_TYPE_LOW_PRIO_ERROR</div><div class="ttdef"><b>Definition</b> sdl_ip_esm.h:115</div></div>
<div class="ttc" id="agroup__sdl__esm__group_html_gad86392cd5b819025cdb4ad523122898e"><div class="ttname"><a href="group__sdl__esm__group.html#gad86392cd5b819025cdb4ad523122898e">SDL_ESM_NO_EVENT_VALUE</a></div><div class="ttdeci">#define SDL_ESM_NO_EVENT_VALUE</div><div class="ttdoc">Event number for when there's no pending event.</div><div class="ttdef"><b>Definition</b> sdl_esm.h:93</div></div>
<div class="ttc" id="astructSDL__ESM__IntrStatus_html"><div class="ttname"><a href="structSDL__ESM__IntrStatus.html">SDL_ESM_IntrStatus</a></div><div class="ttdoc">Structure to access the status of interrupts belonging to a High or Low priority interrupt.</div><div class="ttdef"><b>Definition</b> sdl_ip_esm.h:216</div></div>
<div class="ttc" id="astructSDL__ESM__IntrStatus_html_addc12c6658e6e258d91c485013aac9b8"><div class="ttname"><a href="structSDL__ESM__IntrStatus.html#addc12c6658e6e258d91c485013aac9b8">SDL_ESM_IntrStatus::nextPendPulseEvent</a></div><div class="ttdeci">uint32_t nextPendPulseEvent</div><div class="ttdef"><b>Definition</b> sdl_ip_esm.h:221</div></div>
</div><!-- fragment --><p>As part of ESM interrupt handling, a self-test flag and callback feature have been implemented to help differentiate between expected error events (those triggered on purpose as part of a test-for-diagnostic routine) and an actual error event indicating a fault. When an SDL function that performs a self-test runs, it will set the ESM self-test status to SDL_ESM_SELF_TEST_ACTIVE and register a callback function. When the application ESM ISR calls <a class="el" href="group__sdl__esm__group.html#gaa8e24ab9ca38c58991fb20113c97a622" title="ESM Low Priority Interrupt Handler.">SDL_ESM_loInterruptHandler()</a> or <a class="el" href="group__sdl__esm__group.html#gaa89e2dd592e33375fb71f82ba27cebd2" title="ESM High Priority Interrupt (NMI) Handler.">SDL_ESM_hiInterruptHandler()</a>, the SDL will call the registered callback and restore the self-test status back to SDL_ESM_SELF_TEST_NONE, although not before saving the status within the intrStatus parameter to inform the application that a self-test triggered the event.</p>
<p>The user application may also use this self-test mechanism to implement custom self-test routines.</p>
<dl class="section attention"><dt>Attention</dt><dd>The self-test feature should not be used from multiple threads. The ESM module does not have any built-in protection of the shared self-test status and callback, and so care must be taken if self-test routines are initiated from different tasks that could potentially preempt each other.</dd></dl>
<h1><a class="anchor" id="autotoc_md261"></a>
Example Usage</h1>
<p>Include the below file to access the APIs</p><ul>
<li>#include &lt;<a class="el" href="sdl__esm_8h.html" title="Header file contains enumerations, structure definitions and function declarations for SDL Error Sign...">sdl_esm.h</a>&gt;</li>
</ul>
<h1><a class="anchor" id="autotoc_md262"></a>
API</h1>
<p><a class="el" href="group__sdl__esm__group.html">Sdl_esm_group</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
