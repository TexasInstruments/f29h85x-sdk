<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<title>F29H85x-SDK: Define Resource Allocations (SETUP Mode)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="F29H85x-SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F29H85x-SDK
   &#160;<span id="projectnumber">1.02.02.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <span id="MSearchSelectExt">&#160;</span>
              <input type="text" id="MSearchField" name="query" value="" placeholder="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('SETUP_PAGE.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Define Resource Allocations (SETUP Mode)</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md292">Overview</a><ul><li class="level2"><a href="#autotoc_md293">Clocktree</a></li>
<li class="level2"><a href="#autotoc_md294">SysCtl</a></li>
<li class="level2"><a href="#autotoc_md295">RTDMA</a></li>
<li class="level2"><a href="#autotoc_md296">SPI</a></li>
<li class="level2"><a href="#autotoc_md297">Memory and System Security</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md298">Generated Files</a><ul><li class="level2"><a href="#autotoc_md299">resourceAllocation.json</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_C_1_2anandyk_2C29_2SDK_2source__code_2c29__sdk__docs_2docs__src_2docs_2api__guide_2components_2resource__allocator_2setup"></a></p>
<p>To enter SETUP mode, select "Define Resource Allocations" in the SysConfig start menu. In SETUP mode, SysConfig is loaded up in a special "system" context, which is not tied to any one core, but covers the SoC as a whole.</p>
<p> <style>div.image img[src="stp_start.png"]{width:60%}</style> </p><div class="image">
<img src="stp_start.png" alt=""/>
<div class="caption">
SETUP mode in SysConfig startup menu</div></div>
<h1><a class="anchor" id="autotoc_md292"></a>
Overview</h1>
<p>The SETUP mode is a composite view of the entire device, from where the board designer can configure SoC-level settings and allocate resources to each available core. This encompasses configurations such as</p>
<ul>
<li>Device-wide settings such as SysCtl</li>
<li>Limited resources such as HW peripherals</li>
<li>PinMux for the device</li>
<li>Clocktree settings</li>
<li>System Security and Memory configuration</li>
<li>Any peripheral settings that are dependent on (or) influence device-wide settings</li>
</ul>
<p>The key features in the functional flow of SETUP modes are described below:</p>
<p> <style>div.image img[src="assignedCore.png"]{width:40%}</style> </p><div class="image">
<img src="assignedCore.png" alt=""/>
<div class="caption">
Assigned CPU option</div></div>
<ul>
<li>For modules like HW peripherals which can be allocated to specific cores, a new <b>Assigned CPU</b> option is available, which indicates which core can add and customize the peripheral in CONFIGURE mode. For such modules, any initialization code that must be generated on CPU1 will still be added appropriately in CONFIGURE mode.</li>
<li>For modules that are common to the device, there is no allocation required, and the view remains identical to STANDARD mode.</li>
<li>For all modules, only the configurations that contribute to SoC-wide setup or resource allocation will be available in SETUP mode. All remaining settings can be specified in CONFIGURE mode.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>There are a number of modules available in STANDARD mode that are not present in SETUP mode. These broadly fall under the category of:<ul>
<li>HW resources that don't require allocation - For e.g., ERAD, CPUTIMERs, which each core has unique instances of, and thus do not necessitate allocation</li>
<li>SW-layer Modules - For e.g., FreeRTOS, DPL, MCU Control Center &amp; Transfer. These may utilize underlying HW resources, but are not allocated as resources themselves <br  />
<br  />
Such modules can directly be added in the CONFIGURE mode step of the Resource Allocator process.</li>
</ul>
</dd></dl>
<p>In the following sections, a few different types of modules are described in detail in order to further elucidate the SETUP mode process.</p>
<h2><a class="anchor" id="autotoc_md293"></a>
Clocktree</h2>
<p>The entire Clocktree module is available to be configured in SETUP mode, since it affects the clock dividers across the SoC</p>
<p> <style>div.image img[src="setup_clocktree.png"]{width:70%}</style> </p><div class="image">
<img src="setup_clocktree.png" alt=""/>
<div class="caption">
Clocktree in SETUP mode</div></div>
<h2><a class="anchor" id="autotoc_md294"></a>
SysCtl</h2>
<p>SysCtl module is available with a subset of features from STANDARD mode that determine device-level configurations. Other settings, such as LPM configurations, are done on a per-core basis in CONFIGURE mode.</p>
<p> <style>div.image img[src="setup_sysctl.png"]{width:70%}</style> </p><div class="image">
<img src="setup_sysctl.png" alt=""/>
<div class="caption">
SysCtl in SETUP mode</div></div>
<h2><a class="anchor" id="autotoc_md295"></a>
RTDMA</h2>
<p>The RTDMA module has static settings which apply across all cores using the current instance, as well as a number of channels per instance of RTDMA that can be allocated between cores with specific priorities. These options are appropriately available in SETUP mode</p>
<p> <style>div.image img[src="stp_dma.png"]{width:70%}</style> </p><div class="image">
<img src="stp_dma.png" alt=""/>
<div class="caption">
RTDMA in SETUP mode</div></div>
<p>The RTDMA MPU modules also feature a similar layout.</p>
<h2><a class="anchor" id="autotoc_md296"></a>
SPI</h2>
<p>There are a limited number of HW SPI instances that can be used amongst all cores present on the device. Thus, the SPI module has an additional "Assigned CPU" option, which determines the core that the selected instance will be allocated to. Along with this, settings relevant to SPI that must be generated on CPU1 (PinMux, Frame Selection etc.) are also specified in SETUP mode. The SPI allocated will be available on the assigned CPU, while the necessary additional code will always be generated on CPU1. Most HW Peripheral modules possessing a PinMux mapping follow this same structure in SETUP mode.</p>
<p> <style>div.image img[src="stp_spi.png"]{width:70%}</style> </p><div class="image">
<img src="stp_spi.png" alt=""/>
<div class="caption">
SPI in SETUP mode</div></div>
<p>There may be additional configurations apart from the aforementioned list. In SPI, "Enable High-Speed mode" is also selected in SETUP mode, since it restricts the available PinMux options. Such module-specific configurations which affect system-level settings will be configured in SETUP mode and are available wherever applicable.</p>
<p>There is also the option to add RTDMA channels directly from the SPI module, which functions similarly to STANDARD mode. A channel is linked to the current SPI instance and automatically allocated to the same core that the SPI itself is allocated to. This functionality is available for all modules with linked DMA instances.</p>
<p> <style>div.image img[src="stp_spidma.png"]{width:70%}</style> </p><div class="image">
<img src="stp_spidma.png" alt=""/>
<div class="caption">
Linking RTDMA channel to SPI</div></div>
<h2><a class="anchor" id="autotoc_md297"></a>
Memory and System Security</h2>
<p>The layout of Memory and System Security modules show some minor differences between STANDARD and SETUP modes. For each of the Memory Region, System Security, LINK and STACK modules, a CPU-specific window is available in the modules dropdown. These are available for CPUs 1,2 and 3 (considering the superset of F29x). If you are using a part number that doesn't possess one/more of these cores, only configure the relevant CPUs.</p>
<p> <style>div.image img[src="std_ss_drop.png"]{width:15%}</style> </p><div class="image">
<img src="std_ss_drop.png" alt=""/>
<div class="caption">
Memory and SSU Modules categorized by CPU</div></div>
<p>Within each module, the available configurations remain largely the same as in STANDARD mode. CPU1 System Security will feature the entire array of SSU related settings, whereas CPU2 and CPU3 System Security will contain only the core specific settings (same as in STANDARD mode). Since the modules themselves are associated with a specific core, there is no allocation required. For further information, refer to <a class="el" href="ALLOCATOR_TOOL.html">SSU &amp; Memory Allocation Tool</a></p>
<p> <style>div.image img[src="stp_ss.png"]{width:70%}</style> </p><div class="image">
<img src="stp_ss.png" alt=""/>
<div class="caption">
System Security module in SETUP mode</div></div>
<p>Only the Sections module is not present in SETUP mode and can be configured directly in CONFIGURE mode. The Memory Regions available for allocating sections will be the same ones configured in SETUP mode, and sections specified by System Security module will be automatically inserted in each core's linker.cmd file.</p>
<dl class="section note"><dt>Note</dt><dd>The tabular views of "Memory Region Summary" and "SSU Summary" are not available in SETUP mode in F29H85x-SDK v1.02. These will be supported in a future release of the SDK.</dd></dl>
<h1><a class="anchor" id="autotoc_md298"></a>
Generated Files</h1>
<h2><a class="anchor" id="autotoc_md299"></a>
resourceAllocation.json</h2>
<p>This is the single major file generated in SETUP mode, which consolidates all specified settings into a JSON object. This file will be provided as an input in the CONFIGURE mode. The RA.syscfg file will not be directly used in CONFIGURE mode, but can be saved in order to save the Resource Allocation so that the JSON can be regenerated at a future time if needed.</p>
<p> <style>div.image img[src="stp_json.png"]{width:45%}</style> </p><div class="image">
<img src="stp_json.png" alt=""/>
<div class="caption">
Generated JSON file</div></div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
